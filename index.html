<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>لوحة التحكم - إدارة العقارات</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            padding: 30px;
            background: #f8f9fa;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card h3 {
            color: #667eea;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .stat-card p {
            color: #666;
            font-size: 1.1em;
        }

        .tabs {
            display: flex;
            background: #f8f9fa;
            padding: 0 30px;
            border-bottom: 2px solid #dee2e6;
        }

        .tab {
            padding: 15px 30px;
            cursor: pointer;
            border: none;
            background: none;
            font-size: 1.1em;
            color: #666;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
        }

        .tab.active {
            color: #667eea;
            border-bottom-color: #667eea;
            font-weight: bold;
        }

        .tab:hover {
            color: #667eea;
        }

        .content {
            padding: 30px;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        .add-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 10px;
            font-size: 1.1em;
            cursor: pointer;
            margin-bottom: 20px;
            transition: all 0.3s;
        }

        .add-button:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        .items-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }

        .item-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transition: all 0.3s;
        }

        .item-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .item-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .item-card-body {
            padding: 20px;
        }

        .item-card h3 {
            color: #333;
            margin-bottom: 10px;
            font-size: 1.3em;
        }

        .item-card p {
            color: #666;
            margin-bottom: 8px;
            line-height: 1.6;
        }

        .item-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .btn {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s;
        }

        .btn-edit {
            background: #ffc107;
            color: white;
        }

        .btn-edit:hover {
            background: #e0a800;
        }

        .btn-delete {
            background: #dc3545;
            color: white;
        }

        .btn-delete:hover {
            background: #c82333;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            margin-bottom: 25px;
        }

        .modal-header h2 {
            color: #667eea;
            font-size: 2em;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: bold;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 1em;
            transition: border 0.3s;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .form-actions {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        .btn-save {
            flex: 1;
            background: #28a745;
            color: white;
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            cursor: pointer;
        }

        .btn-save:hover {
            background: #218838;
        }

        .btn-cancel {
            flex: 1;
            background: #6c757d;
            color: white;
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            cursor: pointer;
        }

        .btn-cancel:hover {
            background: #5a6268;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #999;
        }

        .empty-state svg {
            width: 100px;
            height: 100px;
            margin-bottom: 20px;
            opacity: 0.3;
        }

        .empty-state h3 {
            font-size: 1.5em;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>🏢 لوحة التحكم الشاملة</h1>
            <p>إدارة موقع العقارات</p>
        </header>

        <div class="stats">
            <div class="stat-card">
                <h3 id="projectsCount">0</h3>
                <p>المشاريع</p>
            </div>
            <div class="stat-card">
                <h3 id="areasCount">0</h3>
                <p>المناطق</p>
            </div>
            <div class="stat-card">
                <h3 id="roadsCount">0</h3>
                <p>الطرق</p>
            </div>
            <div class="stat-card">
                <h3 id="unitsCount">0</h3>
                <p>الوحدات</p>
            </div>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="switchTab('projects')">المشاريع</button>
            <button class="tab" onclick="switchTab('areas')">المناطق</button>
            <button class="tab" onclick="switchTab('roads')">الطرق</button>
            <button class="tab" onclick="switchTab('units')">الوحدات</button>
        </div>

        <div class="content">
            <!-- المشاريع -->
            <div id="projects" class="section active">
                <button class="add-button" onclick="openModal('project')">➕ إضافة مشروع جديد</button>
                <div id="projectsList" class="items-grid"></div>
            </div>

            <!-- المناطق -->
            <div id="areas" class="section">
                <button class="add-button" onclick="openModal('area')">➕ إضافة منطقة جديدة</button>
                <div id="areasList" class="items-grid"></div>
            </div>

            <!-- الطرق -->
            <div id="roads" class="section">
                <button class="add-button" onclick="openModal('road')">➕ إضافة طريق جديد</button>
                <div id="roadsList" class="items-grid"></div>
            </div>

            <!-- الوحدات -->
            <div id="units" class="section">
                <button class="add-button" onclick="openModal('unit')">➕ إضافة وحدة جديدة</button>
                <div id="unitsList" class="items-grid"></div>
            </div>
        </div>
    </div>

    <!-- Modal للمشاريع -->
    <div id="projectModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="projectModalTitle">إضافة مشروع جديد</h2>
            </div>
            <form id="projectForm">
                <div class="form-group">
                    <label>اسم المشروع *</label>
                    <input type="text" id="projectName" required>
                </div>
                <div class="form-group">
                    <label>رابط الصورة</label>
                    <input type="url" id="projectImage" placeholder="https://example.com/image.jpg">
                </div>
                <div class="form-group">
                    <label>الوصف</label>
                    <textarea id="projectDescription"></textarea>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn-save">💾 حفظ</button>
                    <button type="button" class="btn-cancel" onclick="closeModal('project')">✖ إلغاء</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal للمناطق -->
    <div id="areaModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="areaModalTitle">إضافة منطقة جديدة</h2>
            </div>
            <form id="areaForm">
                <div class="form-group">
                    <label>اسم المنطقة *</label>
                    <input type="text" id="areaName" required>
                </div>
                <div class="form-group">
                    <label>رابط الصورة</label>
                    <input type="url" id="areaImage" placeholder="https://example.com/image.jpg">
                </div>
                <div class="form-group">
                    <label>الوصف</label>
                    <textarea id="areaDescription"></textarea>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn-save">💾 حفظ</button>
                    <button type="button" class="btn-cancel" onclick="closeModal('area')">✖ إلغاء</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal للطرق -->
    <div id="roadModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="roadModalTitle">إضافة طريق جديد</h2>
            </div>
            <form id="roadForm">
                <div class="form-group">
                    <label>اسم الطريق *</label>
                    <input type="text" id="roadName" required>
                </div>
                <div class="form-group">
                    <label>المنطقة *</label>
                    <select id="roadArea" required>
                        <option value="">اختر المنطقة</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>رابط الصورة</label>
                    <input type="url" id="roadImage" placeholder="https://example.com/image.jpg">
                </div>
                <div class="form-group">
                    <label>الوصف</label>
                    <textarea id="roadDescription"></textarea>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn-save">💾 حفظ</button>
                    <button type="button" class="btn-cancel" onclick="closeModal('road')">✖ إلغاء</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal للوحدات -->
    <div id="unitModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="unitModalTitle">إضافة وحدة جديدة</h2>
            </div>
            <form id="unitForm">
                <div class="form-group">
                    <label>عنوان الوحدة *</label>
                    <input type="text" id="unitTitle" required>
                </div>
                <div class="form-group">
                    <label>الكود *</label>
                    <input type="text" id="unitCode" required>
                </div>
                <div class="form-group">
                    <label>المشروع *</label>
                    <select id="unitProject" required>
                        <option value="">اختر المشروع</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>السعر (جنيه) *</label>
                    <input type="number" id="unitPrice" required>
                </div>
                <div class="form-group">
                    <label>رابط الصورة</label>
                    <input type="url" id="unitImage" placeholder="https://example.com/image.jpg">
                </div>
                <div class="form-group">
                    <label>الوصف</label>
                    <textarea id="unitDescription"></textarea>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn-save">💾 حفظ</button>
                    <button type="button" class="btn-cancel" onclick="closeModal('unit')">✖ إلغاء</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // البيانات المخزنة
        let projects = [];
        let areas = [];
        let roads = [];
        let units = [];
        let editingId = null;
        let editingType = null;

        // تحميل البيانات عند بدء التشغيل
        window.onload = function() {
            loadData();
            renderAll();
        };

        // تحميل البيانات من المتغيرات
        function loadData() {
            // يمكن هنا تحميل البيانات من API أو قاعدة بيانات
        }

        // حفظ البيانات
        function saveData() {
            // يمكن هنا حفظ البيانات إلى API أو قاعدة بيانات
            updateStats();
        }

        // تحديث الإحصائيات
        function updateStats() {
            document.getElementById('projectsCount').textContent = projects.length;
            document.getElementById('areasCount').textContent = areas.length;
            document.getElementById('roadsCount').textContent = roads.length;
            document.getElementById('unitsCount').textContent = units.length;
        }

        // التبديل بين التبويبات
        function switchTab(tabName) {
            // إخفاء جميع الأقسام
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            
            // إظهار القسم المحدد
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        // فتح نافذة الإضافة/التعديل
        function openModal(type, id = null) {
            editingId = id;
            editingType = type;
            
            const modal = document.getElementById(type + 'Modal');
            modal.classList.add('active');
            
            if (id !== null) {
                // وضع التعديل
                document.getElementById(type + 'ModalTitle').textContent = 'تعديل ' + getTypeName(type);
                fillForm(type, id);
            } else {
                // وضع الإضافة
                document.getElementById(type + 'ModalTitle').textContent = 'إضافة ' + getTypeName(type) + ' جديد';
                document.getElementById(type + 'Form').reset();
            }
            
            // تحديث القوائم المنسدلة
            updateDropdowns();
        }

        // إغلاق النافذة
        function closeModal(type) {
            document.getElementById(type + 'Modal').classList.remove('active');
            editingId = null;
            editingType = null;
        }

        // الحصول على اسم النوع
        function getTypeName(type) {
            const names = {
                project: 'المشروع',
                area: 'المنطقة',
                road: 'الطريق',
                unit: 'الوحدة'
            };
            return names[type];
        }

        // ملء النموذج بالبيانات عند التعديل
        function fillForm(type, id) {
            let item;
            if (type === 'project') item = projects.find(p => p.id === id);
            else if (type === 'area') item = areas.find(a => a.id === id);
            else if (type === 'road') item = roads.find(r => r.id === id);
            else if (type === 'unit') item = units.find(u => u.id === id);
            
            if (!item) return;
            
            if (type === 'project') {
                document.getElementById('projectName').value = item.name;
                document.getElementById('projectImage').value = item.image || '';
                document.getElementById('projectDescription').value = item.description || '';
            } else if (type === 'area') {
                document.getElementById('areaName').value = item.name;
                document.getElementById('areaImage').value = item.image || '';
                document.getElementById('areaDescription').value = item.description || '';
            } else if (type === 'road') {
                document.getElementById('roadName').value = item.name;
                document.getElementById('roadArea').value = item.area;
                document.getElementById('roadImage').value = item.image || '';
                document.getElementById('roadDescription').value = item.description || '';
            } else if (type === 'unit') {
                document.getElementById('unitTitle').value = item.title;
                document.getElementById('unitCode').value = item.code;
                document.getElementById('unitProject').value = item.project;
                document.getElementById('unitPrice').value = item.price;
                document.getElementById('unitImage').value = item.image || '';
                document.getElementById('unitDescription').value = item.description || '';
            }
        }

        // تحديث القوائم المنسدلة
        function updateDropdowns() {
            // تحديث قائمة المناطق في الطرق
            const roadAreaSelect = document.getElementById('roadArea');
            roadAreaSelect.innerHTML = '<option value="">اختر المنطقة</option>';
            areas.forEach(area => {
                roadAreaSelect.innerHTML += `<option value="${area.id}">${area.name}</option>`;
            });
            
            // تحديث قائمة المشاريع في الوحدات
            const unitProjectSelect = document.getElementById('unitProject');
            unitProjectSelect.innerHTML = '<option value="">اختر المشروع</option>';
            projects.forEach(project => {
                unitProjectSelect.innerHTML += `<option value="${project.id}">${project.name}</option>`;
            });
        }

        // معالجات النماذج
        document.getElementById('projectForm').onsubmit = function(e) {
            e.preventDefault();
            saveProject();
        };

        document.getElementById('areaForm').onsubmit = function(e) {
            e.preventDefault();
            saveArea();
        };

        document.getElementById('roadForm').onsubmit = function(e) {
            e.preventDefault();
            saveRoad();
        };

        document.getElementById('unitForm').onsubmit = function(e) {
            e.preventDefault();
            saveUnit();
        };

        // حفظ المشروع
        function saveProject() {
            const data = {
                id: editingId || Date.now(),
                name: document.getElementById('projectName').value,
                image: document.getElementById('projectImage').value,
                description: document.getElementById('projectDescription').value
            };
            
            if (editingId) {
                const index = projects.findIndex(p => p.id === editingId);
                projects[index] = data;
            } else {
                projects.push(data);
            }
            
            closeModal('project');
            renderProjects();
            saveData();
        }

        // حفظ المنطقة
        function saveArea() {
            const data = {
                id: editingId || Date.now(),
                name: document.getElementById('areaName').value,
                image: document.getElementById('areaImage').value,
                description: document.getElementById('areaDescription').value
            };
            
            if (editingId) {
                const index = areas.findIndex(a => a.id === editingId);
                areas[index] = data;
            } else {
                areas.push(data);
            }
            
            closeModal('area');
            renderAreas();
            saveData();
        }

        // حفظ الطريق
        function saveRoad() {
            const data = {
                id: editingId || Date.now(),
                name: document.getElementById('roadName').value,
                area: document.getElementById('roadArea').value,
                image: document.getElementById('roadImage').value,
                description: document.getElementById('roadDescription').value
            };
            
            if (editingId) {
                const index = roads.findIndex(r => r.id === editingId);
                roads[index] = data;
            } else {
                roads.push(data);
            }
            
            closeModal('road');
            renderRoads();
            saveData();
        }

        // حفظ الوحدة
        function saveUnit() {
            const data = {
                id: editingId || Date.now(),
                title: document.getElementById('unitTitle').value,
                code: document.getElementById('unitCode').value,
                project: document.getElementById('unitProject').value,
                price: document.getElementById('unitPrice').value,
                image: document.getElementById('unitImage').value,
                description: document.getElementById('unitDescription').value
            };
            
            if (editingId) {
                const index = units.findIndex(u => u.id === editingId);
                units[index] = data;
            } else {
                units.push(data);
            }
            
            closeModal('unit');
            renderUnits();
            saveData();
        }

        // حذف عنصر
        function deleteItem(type, id) {
            if (!confirm('هل أنت متأكد من الحذف؟')) return;
            
            if (type === 'project') {
                projects = projects.filter(p => p.id !== id);
                renderProjects();
            } else if (type === 'area') {
                areas = areas.filter(a => a.id !== id);
                renderAreas();
            } else if (type === 'road') {
                roads = roads.filter(r => r.id !== id);
                renderRoads();
            } else if (type === 'unit') {
                units = units.filter(u => u.id !== id);
                renderUnits();
            }
            
            saveData();
        }

        // عرض المشاريع
        function renderProjects() {
            const container = document.getElementById('projectsList');
            
            if (projects.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <h3>لا توجد مشاريع حالياً</h3>
                        <p>ابدأ بإضافة مشروع جديد!</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = projects.map(p => `
                <div class="item-card">
                    ${p.image ? `<img src="${p.image}" alt="${p.name}">` : ''}
                    <div class="item-card-body">
                        <h3>${p.name}</h3>
                        <p>${p.description || 'لا يوجد وصف'}</p>
                        <div class="item-actions">
                            <button class="btn btn-edit" onclick="openModal('project', ${p.id})">✏️ تعديل</button>
                            <button class="btn btn-delete" onclick="deleteItem('project', ${p.id})">🗑️ حذف</button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // عرض المناطق
        function renderAreas() {
            const container = document.getElementById('areasList');
            
            if (areas.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <h3>لا توجد مناطق حالياً</h3>
                        <p>ابدأ بإضافة منطقة جديدة!</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = areas.map(a => `
                <div class="item-card">
                    ${a.image ? `<img src="${a.image}" alt="${a.name}">` : ''}
                    <div class="item-card-body">
                        <h3>${a.name}</h3>
                        <p>${a.description || 'لا يوجد وصف'}</p>
                        <div class="item-actions">
                            <button class="btn btn-edit" onclick="openModal('area', ${a.id})">✏️ تعديل</button>
                            <button class="btn btn-delete" onclick="deleteItem('area', ${a.id})">🗑️ حذف</button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // عرض الطرق
        function renderRoads() {
            const container = document.getElementById('roadsList');
            
            if (roads.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <h3>لا توجد طرق حالياً</h3>
                        <p>ابدأ بإضافة طريق جديد!</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = roads.map(r => {
                const area = areas.find(a => a.id == r.area);
                return `
                    <div class="item-card">
                        ${r.image ? `<img src="${r.image}" alt="${r.name}">` : ''}
                        <div class="item-card-body">
                            <h3>${r.name}</h3>
                            <p><strong>المنطقة:</strong> ${area ? area.name : 'غير محدد'}</p>
                            <p>${r.description || 'لا يوجد وصف'}</p>
                            <div class="item-actions">
                                <button class="btn btn-edit" onclick="openModal('road', ${r.id})">✏️ تعديل</button>
                                <button class="btn btn-delete" onclick="deleteItem('road', ${r.id})">🗑️ حذف</button>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // عرض الوحدات
        function renderUnits() {
            const container = document.getElementById('unitsList');
            
            if (units.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <h3>لا توجد وحدات حالياً</h3>
                        <p>ابدأ بإضافة وحدة جديدة!</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = units.map(u => {
                const project = projects.find(p => p.id == u.project);
                return `
                    <div class="item-card">
                        ${u.image ? `<img src="${u.image}" alt="${u.title}">` : ''}
                        <div class="item-card-body">
                            <h3>${u.title}</h3>
                            <p><strong>الكود:</strong> ${u.code}</p>
                            <p><strong>المشروع:</strong> ${project ? project.name : 'غير محدد'}</p>
                            <p><strong>السعر:</strong> ${Number(u.price || 0).toLocaleString('ar-EG')} جنيه</p>
                            <p>${u.description || 'لا يوجد وصف'}</p>
                            <div class="item-actions">
                                <button class="btn btn-edit" onclick="openModal('unit', ${u.id})">✏️ تعديل</button>
                                <button class="btn btn-delete" onclick="deleteItem('unit', ${u.id})">🗑️ حذف</button>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // عرض كل شيء
        function renderAll() {
            renderProjects();
            renderAreas();
            renderRoads();
            renderUnits();
            updateStats();
        }

        // إغلاق النافذة عند النقر خارجها
        document.querySelectorAll('.modal').forEach(modal => {
            modal.addEventListener('click', function(e) {
                if (e.target === this) {
                    this.classList.remove('active');
                }
            });
        });
    </script>
</body>
</html>
