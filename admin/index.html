<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… - Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            padding: 30px;
            background: #f8f9fa;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card h3 {
            color: #667eea;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .stat-card p {
            color: #666;
            font-size: 1.1em;
        }

        .tabs {
            display: flex;
            background: #f8f9fa;
            padding: 0 30px;
            border-bottom: 2px solid #dee2e6;
        }

        .tab {
            padding: 15px 30px;
            cursor: pointer;
            border: none;
            background: none;
            font-size: 1.1em;
            color: #666;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
        }

        .tab.active {
            color: #667eea;
            border-bottom-color: #667eea;
            font-weight: bold;
        }

        .tab:hover {
            color: #667eea;
        }

        .content {
            padding: 30px;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        .add-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 10px;
            font-size: 1.1em;
            cursor: pointer;
            margin-bottom: 20px;
            transition: all 0.3s;
        }

        .add-button:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        .items-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }

        .item-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transition: all 0.3s;
        }

        .item-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .item-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .item-card-body {
            padding: 20px;
        }

        .item-card h3 {
            color: #333;
            margin-bottom: 10px;
            font-size: 1.3em;
        }

        .item-card p {
            color: #666;
            margin-bottom: 8px;
            line-height: 1.6;
        }

        .item-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .btn {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s;
        }

        .btn-edit {
            background: #ffc107;
            color: white;
        }

        .btn-edit:hover {
            background: #e0a800;
        }

        .btn-delete {
            background: #dc3545;
            color: white;
        }

        .btn-delete:hover {
            background: #c82333;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            margin-bottom: 25px;
        }

        .modal-header h2 {
            color: #667eea;
            font-size: 2em;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: bold;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 1em;
            transition: border 0.3s;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .form-actions {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        .btn-save {
            flex: 1;
            background: #28a745;
            color: white;
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            cursor: pointer;
        }

        .btn-save:hover {
            background: #218838;
        }

        .btn-cancel {
            flex: 1;
            background: #6c757d;
            color: white;
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            cursor: pointer;
        }

        .btn-cancel:hover {
            background: #5a6268;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #999;
        }

        .empty-state svg {
            width: 100px;
            height: 100px;
            margin-bottom: 20px;
            opacity: 0.3;
        }

        .empty-state h3 {
            font-size: 1.5em;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ¢ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø´Ø§Ù…Ù„Ø©</h1>
            <p>Ø¥Ø¯Ø§Ø±Ø© Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª</p>
        </header>

        <div class="stats">
            <div class="stat-card">
                <h3 id="projectsCount">0</h3>
                <p>Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹</p>
            </div>
            <div class="stat-card">
                <h3 id="areasCount">0</h3>
                <p>Ø§Ù„Ù…Ù†Ø§Ø·Ù‚</p>
            </div>
            <div class="stat-card">
                <h3 id="roadsCount">0</h3>
                <p>Ø§Ù„Ø·Ø±Ù‚</p>
            </div>
            <div class="stat-card">
                <h3 id="unitsCount">0</h3>
                <p>Ø§Ù„ÙˆØ­Ø¯Ø§Øª</p>
            </div>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="switchTab('projects')">Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹</button>
            <button class="tab" onclick="switchTab('areas')">Ø§Ù„Ù…Ù†Ø§Ø·Ù‚</button>
            <button class="tab" onclick="switchTab('roads')">Ø§Ù„Ø·Ø±Ù‚</button>
            <button class="tab" onclick="switchTab('units')">Ø§Ù„ÙˆØ­Ø¯Ø§Øª</button>
        </div>

        <div class="content">
            <!-- Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ -->
            <div id="projects" class="section active">
                <button class="add-button" onclick="openModal('project')">â• Ø¥Ø¶Ø§ÙØ© Ù…Ø´Ø±ÙˆØ¹ Ø¬Ø¯ÙŠØ¯</button>
                <div id="projectsList" class="items-grid"></div>
            </div>

            <!-- Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ -->
            <div id="areas" class="section">
                <button class="add-button" onclick="openModal('area')">â• Ø¥Ø¶Ø§ÙØ© Ù…Ù†Ø·Ù‚Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>
                <div id="areasList" class="items-grid"></div>
            </div>

            <!-- Ø§Ù„Ø·Ø±Ù‚ -->
            <div id="roads" class="section">
                <button class="add-button" onclick="openModal('road')">â• Ø¥Ø¶Ø§ÙØ© Ø·Ø±ÙŠÙ‚ Ø¬Ø¯ÙŠØ¯</button>
                <div id="roadsList" class="items-grid"></div>
            </div>

            <!-- Ø§Ù„ÙˆØ­Ø¯Ø§Øª -->
            <div id="units" class="section">
                <button class="add-button" onclick="openModal('unit')">â• Ø¥Ø¶Ø§ÙØ© ÙˆØ­Ø¯Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>
                <div id="unitsList" class="items-grid"></div>
            </div>
        </div>
    </div>

    <!-- Modal Ù„Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ -->
    <div id="projectModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="projectModalTitle">Ø¥Ø¶Ø§ÙØ© Ù…Ø´Ø±ÙˆØ¹ Ø¬Ø¯ÙŠØ¯</h2>
            </div>
            <form id="projectForm">
                <div class="form-group">
                    <label>Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ *</label>
                    <input type="text" id="projectName" required>
                </div>
                <div class="form-group">
                    <label>Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©</label>
                    <input type="url" id="projectImage" placeholder="https://example.com/image.jpg">
                </div>
                <div class="form-group">
                    <label>Ø§Ù„ÙˆØµÙ</label>
                    <textarea id="projectDescription"></textarea>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn-save">ğŸ’¾ Ø­ÙØ¸</button>
                    <button type="button" class="btn-cancel" onclick="closeModal('project')">âœ– Ø¥Ù„ØºØ§Ø¡</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Ù„Ù„Ù…Ù†Ø§Ø·Ù‚ -->
    <div id="areaModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="areaModalTitle">Ø¥Ø¶Ø§ÙØ© Ù…Ù†Ø·Ù‚Ø© Ø¬Ø¯ÙŠØ¯Ø©</h2>
            </div>
            <form id="areaForm">
                <div class="form-group">
                    <label>Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø·Ù‚Ø© *</label>
                    <input type="text" id="areaName" required>
                </div>
                <div class="form-group">
                    <label>Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©</label>
                    <input type="url" id="areaImage" placeholder="https://example.com/image.jpg">
                </div>
                <div class="form-group">
                    <label>Ø§Ù„ÙˆØµÙ</label>
                    <textarea id="areaDescription"></textarea>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn-save">ğŸ’¾ Ø­ÙØ¸</button>
                    <button type="button" class="btn-cancel" onclick="closeModal('area')">âœ– Ø¥Ù„ØºØ§Ø¡</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Ù„Ù„Ø·Ø±Ù‚ -->
    <div id="roadModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="roadModalTitle">Ø¥Ø¶Ø§ÙØ© Ø·Ø±ÙŠÙ‚ Ø¬Ø¯ÙŠØ¯</h2>
            </div>
            <form id="roadForm">
                <div class="form-group">
                    <label>Ø§Ø³Ù… Ø§Ù„Ø·Ø±ÙŠÙ‚ *</label>
                    <input type="text" id="roadName" required>
                </div>
                <div class="form-group">
                    <label>Ø§Ù„Ù…Ù†Ø·Ù‚Ø© *</label>
                    <select id="roadArea" required>
                        <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ù†Ø·Ù‚Ø©</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©</label>
                    <input type="url" id="roadImage" placeholder="https://example.com/image.jpg">
                </div>
                <div class="form-group">
                    <label>Ø§Ù„ÙˆØµÙ</label>
                    <textarea id="roadDescription"></textarea>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn-save">ğŸ’¾ Ø­ÙØ¸</button>
                    <button type="button" class="btn-cancel" onclick="closeModal('road')">âœ– Ø¥Ù„ØºØ§Ø¡</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Ù„Ù„ÙˆØ­Ø¯Ø§Øª -->
    <div id="unitModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="unitModalTitle">Ø¥Ø¶Ø§ÙØ© ÙˆØ­Ø¯Ø© Ø¬Ø¯ÙŠØ¯Ø©</h2>
            </div>
            <form id="unitForm">
                <div class="form-group">
                    <label>Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙˆØ­Ø¯Ø© *</label>
                    <input type="text" id="unitTitle" required>
                </div>
                <div class="form-group">
                    <label>Ø§Ù„ÙƒÙˆØ¯ *</label>
                    <input type="text" id="unitCode" required>
                </div>
                <div class="form-group">
                    <label>Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ *</label>
                    <select id="unitProject" required>
                        <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Ø§Ù„Ø³Ø¹Ø± (Ø¬Ù†ÙŠÙ‡) *</label>
                    <input type="number" id="unitPrice" required>
                </div>
                <div class="form-group">
                    <label>Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©</label>
                    <input type="url" id="unitImage" placeholder="https://example.com/image.jpg">
                </div>
                <div class="form-group">
                    <label>Ø§Ù„ÙˆØµÙ</label>
                    <textarea id="unitDescription"></textarea>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn-save">ğŸ’¾ Ø­ÙØ¸</button>
                    <button type="button" class="btn-cancel" onclick="closeModal('unit')">âœ– Ø¥Ù„ØºØ§Ø¡</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø®Ø²Ù†Ø©
        let projects = [];
        let areas = [];
        let roads = [];
        let units = [];
        let editingId = null;
        let editingType = null;

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ Ø¨Ø¯Ø¡ Ø§Ù„ØªØ´ØºÙŠÙ„
        window.onload = function() {
            loadData();
            renderAll();
        };

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª
        function loadData() {
            // ÙŠÙ…ÙƒÙ† Ù‡Ù†Ø§ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† API Ø£Ùˆ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª
        }

        // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function saveData() {
            // ÙŠÙ…ÙƒÙ† Ù‡Ù†Ø§ Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ API Ø£Ùˆ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª
            updateStats();
        }

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
        function updateStats() {
            document.getElementById('projectsCount').textContent = projects.length;
            document.getElementById('areasCount').textContent = areas.length;
            document.getElementById('roadsCount').textContent = roads.length;
            document.getElementById('unitsCount').textContent = units.length;
        }

        // Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ø¨ÙŠÙ† Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
        function switchTab(tabName) {
            // Ø¥Ø®ÙØ§Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø­Ø¯Ø¯
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        // ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¥Ø¶Ø§ÙØ©/Ø§Ù„ØªØ¹Ø¯ÙŠÙ„
        function openModal(type, id = null) {
            editingId = id;
            editingType = type;
            
            const modal = document.getElementById(type + 'Modal');
            modal.classList.add('active');
            
            if (id !== null) {
                // ÙˆØ¶Ø¹ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„
                document.getElementById(type + 'ModalTitle').textContent = 'ØªØ¹Ø¯ÙŠÙ„ ' + getTypeName(type);
                fillForm(type, id);
            } else {
                // ÙˆØ¶Ø¹ Ø§Ù„Ø¥Ø¶Ø§ÙØ©
                document.getElementById(type + 'ModalTitle').textContent = 'Ø¥Ø¶Ø§ÙØ© ' + getTypeName(type) + ' Ø¬Ø¯ÙŠØ¯';
                document.getElementById(type + 'Form').reset();
            }
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ù…Ù†Ø³Ø¯Ù„Ø©
            updateDropdowns();
        }

        // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø©
        function closeModal(type) {
            document.getElementById(type + 'Modal').classList.remove('active');
            editingId = null;
            editingType = null;
        }

        // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ø³Ù… Ø§Ù„Ù†ÙˆØ¹
        function getTypeName(type) {
            const names = {
                project: 'Ø§Ù„Ù…Ø´Ø±ÙˆØ¹',
                area: 'Ø§Ù„Ù…Ù†Ø·Ù‚Ø©',
                road: 'Ø§Ù„Ø·Ø±ÙŠÙ‚',
                unit: 'Ø§Ù„ÙˆØ­Ø¯Ø©'
            };
            return names[type];
        }

        // Ù…Ù„Ø¡ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø¨Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„
        function fillForm(type, id) {
            let item;
            if (type === 'project') item = projects.find(p => p.id === id);
            else if (type === 'area') item = areas.find(a => a.id === id);
            else if (type === 'road') item = roads.find(r => r.id === id);
            else if (type === 'unit') item = units.find(u => u.id === id);
            
            if (!item) return;
            
            if (type === 'project') {
                document.getElementById('projectName').value = item.name;
                document.getElementById('projectImage').value = item.image || '';
                document.getElementById('projectDescription').value = item.description || '';
            } else if (type === 'area') {
                document.getElementById('areaName').value = item.name;
                document.getElementById('areaImage').value = item.image || '';
                document.getElementById('areaDescription').value = item.description || '';
            } else if (type === 'road') {
                document.getElementById('roadName').value = item.name;
                document.getElementById('roadArea').value = item.area;
                document.getElementById('roadImage').value = item.image || '';
                document.getElementById('roadDescription').value = item.description || '';
            } else if (type === 'unit') {
                document.getElementById('unitTitle').value = item.title;
                document.getElementById('unitCode').value = item.code;
                document.getElementById('unitProject').value = item.project;
                document.getElementById('unitPrice').value = item.price;
                document.getElementById('unitImage').value = item.image || '';
                document.getElementById('unitDescription').value = item.description || '';
            }
        }

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ù…Ù†Ø³Ø¯Ù„Ø©
        function updateDropdowns() {
            // ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ ÙÙŠ Ø§Ù„Ø·Ø±Ù‚
            const roadAreaSelect = document.getElementById('roadArea');
            roadAreaSelect.innerHTML = '<option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ù†Ø·Ù‚Ø©</option>';
            areas.forEach(area => {
                roadAreaSelect.innerHTML += `<option value="${area.id}">${area.name}</option>`;
            });
            
            // ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ ÙÙŠ Ø§Ù„ÙˆØ­Ø¯Ø§Øª
            const unitProjectSelect = document.getElementById('unitProject');
            unitProjectSelect.innerHTML = '<option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</option>';
            projects.forEach(project => {
                unitProjectSelect.innerHTML += `<option value="${project.id}">${project.name}</option>`;
            });
        }

        // Ù…Ø¹Ø§Ù„Ø¬Ø§Øª Ø§Ù„Ù†Ù…Ø§Ø°Ø¬
        document.getElementById('projectForm').onsubmit = function(e) {
            e.preventDefault();
            saveProject();
        };

        document.getElementById('areaForm').onsubmit = function(e) {
            e.preventDefault();
            saveArea();
        };

        document.getElementById('roadForm').onsubmit = function(e) {
            e.preventDefault();
            saveRoad();
        };

        document.getElementById('unitForm').onsubmit = function(e) {
            e.preventDefault();
            saveUnit();
        };

        // Ø­ÙØ¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
        function saveProject() {
            const data = {
                id: editingId || Date.now(),
                name: document.getElementById('projectName').value,
                image: document.getElementById('projectImage').value,
                description: document.getElementById('projectDescription').value
            };
            
            if (editingId) {
                const index = projects.findIndex(p => p.id === editingId);
                projects[index] = data;
            } else {
                projects.push(data);
            }
            
            closeModal('project');
            renderProjects();
            saveData();
        }

        // Ø­ÙØ¸ Ø§Ù„Ù…Ù†Ø·Ù‚Ø©
        function saveArea() {
            const data = {
                id: editingId || Date.now(),
                name: document.getElementById('areaName').value,
                image: document.getElementById('areaImage').value,
                description: document.getElementById('areaDescription').value
            };
            
            if (editingId) {
                const index = areas.findIndex(a => a.id === editingId);
                areas[index] = data;
            } else {
                areas.push(data);
            }
            
            closeModal('area');
            renderAreas();
            saveData();
        }

        // Ø­ÙØ¸ Ø§Ù„Ø·Ø±ÙŠÙ‚
        function saveRoad() {
            const data = {
                id: editingId || Date.now(),
                name: document.getElementById('roadName').value,
                area: document.getElementById('roadArea').value,
                image: document.getElementById('roadImage').value,
                description: document.getElementById('roadDescription').value
            };
            
            if (editingId) {
                const index = roads.findIndex(r => r.id === editingId);
                roads[index] = data;
            } else {
                roads.push(data);
            }
            
            closeModal('road');
            renderRoads();
            saveData();
        }

        // Ø­ÙØ¸ Ø§Ù„ÙˆØ­Ø¯Ø©
        function saveUnit() {
            const data = {
                id: editingId || Date.now(),
                title: document.getElementById('unitTitle').value,
                code: document.getElementById('unitCode').value,
                project: document.getElementById('unitProject').value,
                price: document.getElementById('unitPrice').value,
                image: document.getElementById('unitImage').value,
                description: document.getElementById('unitDescription').value
            };
            
            if (editingId) {
                const index = units.findIndex(u => u.id === editingId);
                units[index] = data;
            } else {
                units.push(data);
            }
            
            closeModal('unit');
            renderUnits();
            saveData();
        }

        // Ø­Ø°Ù Ø¹Ù†ØµØ±
        function deleteItem(type, id) {
            if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø­Ø°ÙØŸ')) return;
            
            if (type === 'project') {
                projects = projects.filter(p => p.id !== id);
                renderProjects();
            } else if (type === 'area') {
                areas = areas.filter(a => a.id !== id);
                renderAreas();
            } else if (type === 'road') {
                roads = roads.filter(r => r.id !== id);
                renderRoads();
            } else if (type === 'unit') {
                units = units.filter(u => u.id !== id);
                renderUnits();
            }
            
            saveData();
        }

        // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹
        function renderProjects() {
            const container = document.getElementById('projectsList');
            
            if (projects.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <h3>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø´Ø§Ø±ÙŠØ¹ Ø­Ø§Ù„ÙŠØ§Ù‹</h3>
                        <p>Ø§Ø¨Ø¯Ø£ Ø¨Ø¥Ø¶Ø§ÙØ© Ù…Ø´Ø±ÙˆØ¹ Ø¬Ø¯ÙŠØ¯!</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = projects.map(p => `
                <div class="item-card">
                    ${p.image ? `<img src="${p.image}" alt="${p.name}">` : ''}
                    <div class="item-card-body">
                        <h3>${p.name}</h3>
                        <p>${p.description || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ'}</p>
                        <div class="item-actions">
                            <button class="btn btn-edit" onclick="openModal('project', ${p.id})">âœï¸ ØªØ¹Ø¯ÙŠÙ„</button>
                            <button class="btn btn-delete" onclick="deleteItem('project', ${p.id})">ğŸ—‘ï¸ Ø­Ø°Ù</button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚
        function renderAreas() {
            const container = document.getElementById('areasList');
            
            if (areas.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <h3>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†Ø§Ø·Ù‚ Ø­Ø§Ù„ÙŠØ§Ù‹</h3>
                        <p>Ø§Ø¨Ø¯Ø£ Ø¨Ø¥Ø¶Ø§ÙØ© Ù…Ù†Ø·Ù‚Ø© Ø¬Ø¯ÙŠØ¯Ø©!</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = areas.map(a => `
                <div class="item-card">
                    ${a.image ? `<img src="${a.image}" alt="${a.name}">` : ''}
                    <div class="item-card-body">
                        <h3>${a.name}</h3>
                        <p>${a.description || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ'}</p>
                        <div class="item-actions">
                            <button class="btn btn-edit" onclick="openModal('area', ${a.id})">âœï¸ ØªØ¹Ø¯ÙŠÙ„</button>
                            <button class="btn btn-delete" onclick="deleteItem('area', ${a.id})">ğŸ—‘ï¸ Ø­Ø°Ù</button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Ø¹Ø±Ø¶ Ø§Ù„Ø·Ø±Ù‚
        function renderRoads() {
            const container = document.getElementById('roadsList');
            
            if (roads.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <h3>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ø±Ù‚ Ø­Ø§Ù„ÙŠØ§Ù‹</h3>
                        <p>Ø§Ø¨Ø¯Ø£ Ø¨Ø¥Ø¶Ø§ÙØ© Ø·Ø±ÙŠÙ‚ Ø¬Ø¯ÙŠØ¯!</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = roads.map(r => {
                const area = areas.find(a => a.id == r.area);
                return `
                    <div class="item-card">
                        ${r.image ? `<img src="${r.image}" alt="${r.name}">` : ''}
                        <div class="item-card-body">
                            <h3>${r.name}</h3>
                            <p><strong>Ø§Ù„Ù…Ù†Ø·Ù‚Ø©:</strong> ${area ? area.name : 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</p>
                            <p>${r.description || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ'}</p>
                            <div class="item-actions">
                                <button class="btn btn-edit" onclick="openModal('road', ${r.id})">âœï¸ ØªØ¹Ø¯ÙŠÙ„</button>
                                <button class="btn btn-delete" onclick="deleteItem('road', ${r.id})">ğŸ—‘ï¸ Ø­Ø°Ù</button>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Ø¹Ø±Ø¶ Ø§Ù„ÙˆØ­Ø¯Ø§Øª
        function renderUnits() {
            const container = document.getElementById('unitsList');
            
            if (units.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <h3>Ù„Ø§ ØªÙˆØ¬Ø¯ ÙˆØ­Ø¯Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹</h3>
                        <p>Ø§Ø¨Ø¯Ø£ Ø¨Ø¥Ø¶Ø§ÙØ© ÙˆØ­Ø¯Ø© Ø¬Ø¯ÙŠØ¯Ø©!</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = units.map(u => {
                const project = projects.find(p => p.id == u.project);
                return `
                    <div class="item-card">
                        ${u.image ? `<img src="${u.image}" alt="${u.title}">` : ''}
                        <div class="item-card-body">
                            <h3>${u.title}</h3>
                            <p><strong>Ø§Ù„ÙƒÙˆØ¯:</strong> ${u.code}</p>
                            <p><strong>Ø§Ù„Ù…Ø´Ø±ÙˆØ¹:</strong> ${project ? project.name : 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</p>
                            <p><strong>Ø§Ù„Ø³Ø¹Ø±:</strong> ${Number(u.price || 0).toLocaleString('ar-EG')} Ø¬Ù†ÙŠÙ‡</p>
                            <p>${u.description || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ'}</p>
                            <div class="item-actions">
                                <button class="btn btn-edit" onclick="openModal('unit', ${u.id})">âœï¸ ØªØ¹Ø¯ÙŠÙ„</button>
                                <button class="btn btn-delete" onclick="deleteItem('unit', ${u.id})">ğŸ—‘ï¸ Ø­Ø°Ù</button>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Ø¹Ø±Ø¶ ÙƒÙ„ Ø´ÙŠØ¡
        function renderAll() {
            renderProjects();
            renderAreas();
            renderRoads();
            renderUnits();
            updateStats();
        }

        // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬Ù‡Ø§
        document.querySelectorAll('.modal').forEach(modal => {
            modal.addEventListener('click', function(e) {
                if (e.target === this) {
                    this.classList.remove('active');
                }
            });
        });
    </script>
</body>
</html>
