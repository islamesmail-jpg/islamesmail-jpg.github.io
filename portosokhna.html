---
---
<!doctype html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>بورتو السخنة — Porto Sokhna | Islam Property</title>

    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous" />

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <style>
        /* ==================================== BASE STYLES & VARIABLES ==================================== */
        :root{
            --accent:#0b76ef; /* الأزرق الرئيسي */
            --accent-dark:#0a68d0;
            --muted:#6b7280; /* اللون الرمادي للنصوص الفرعية */
            --bg:#ffffff;
            --card:#fbfdff; /* لون خلفية الكروت الفاتح */
            --radius:12px;
            font-family: "Cairo", sans-serif;
            font-size: 16px;
        }
        html,body{margin:0;padding:0;background:var(--bg);color:#0b1b2b;}
        a{color:var(--accent);text-decoration:none}
        h1,h2,h3,h4 {color: #000; font-weight: 700;} /* تم التعديل إلى الأسود #000 */

        .container{max-width:1180px;margin:22px auto;padding:0 16px}

        /* Breadcrumbs */
        .breadcrumbs{margin: -8px 0 16px; font-size: 14px; color: var(--muted);}
        .breadcrumbs a{color: var(--muted); text-decoration: none;}
        .breadcrumbs a:hover{color: var(--accent);}
        .breadcrumbs i{font-size: 10px; margin: 0 8px;}
        .breadcrumbs [aria-current="page"]{color: #0b1b2b; font-weight: 600;}

        /* ==================================== HERO SECTION ==================================== */
        .hero{border-radius:var(--radius);overflow:hidden;box-shadow:0 8px 30px rgba(12,12,12,0.06);background:linear-gradient(180deg,#fff,#fbfcff)}
        .hero-inner{display:grid;grid-template-columns:1fr 420px;gap:20px;align-items:center;padding:22px}
        @media(max-width:960px){.hero-inner{grid-template-columns:1fr;padding:14px}}
        
        .hero-left h1{margin:0;font-size:32px;border-bottom: 2px solid var(--accent); display: inline-block; padding-bottom: 5px;}
        .hero-left p{color:var(--muted);margin:6px 0 12px}
        
        .kpis{display:flex;gap:10px;flex-wrap:wrap}
        .kpi{background:var(--card);padding:10px 12px;border-radius:10px;font-weight:700;font-size:14px;color:#0b1b2b;box-shadow:0 4px 14px rgba(10,10,10,0.03);border:1px solid #eef2f6;}

        /* Search */
        .search-box{position:relative;margin-top:10px}
        #siteSearch{width:100%;padding:12px;border-radius:10px;border:1px solid #e6e8eb;font-size:15px;box-sizing: border-box;}
        #suggest{display:none;position:absolute;left:0;right:0;top:calc(100% + 8px);background:white;border-radius:8px;border:1px solid #e6e8eb;padding:6px;box-shadow:0 10px 30px rgba(12,12,12,0.06);z-index:50;max-height:280px;overflow:auto}
        #suggest a{display:block;padding:8px 10px;border-radius:6px;text-decoration:none;color:#111}
        #suggest a:hover{background:#f3f4f6}

        .hero-right img{width:100%;height:300px;object-fit:cover;border-radius:10px}

        /* Gallery - PC/Tablet */
        .gallery{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}
        .gallery img{width:calc(33.333% - 6px);border-radius:10px;height:110px;object-fit:cover;border:1px solid #eee;cursor:pointer;opacity:0.9; flex-shrink: 0;} /* Added flex-shrink: 0 */
        .gallery img:hover {opacity: 1;}

        /* Gallery - MOBILE: Horizontal Scroll/Swipeable */
        @media(max-width:640px){
            .gallery{
                display: flex; /* Use flex for horizontal layout */
                flex-wrap: nowrap; /* Prevent wrapping */
                overflow-x: scroll; /* Enable horizontal scrolling/swiping */
                -webkit-overflow-scrolling: touch; /* Enhance scrolling on iOS */
                padding-bottom: 8px; /* Breathing room */
            }
            .gallery img{
                width: 150px; /* Fixed width for swipeable items */
                height: 100px;
                margin-left: 8px; /* Space between images */
            }
            /* Hide the last image margin on RTL */
            .gallery img:last-child { margin-left: 0; }
        }


        /* ==================================== LAYOUT & CARDS ==================================== */
        .layout{display:grid;grid-template-columns:1fr 340px;gap:20px;margin-top:20px}
        @media(max-width:1100px){.layout{grid-template-columns:1fr}}
        
        /* Mobile Layout Order Change: Units first, then Description/Features */
        @media(max-width:1100px){
            .layout > div:first-child { 
                display: flex; 
                flex-direction: column; 
            }
            .units-section { order: 1; }
            .description-section { order: 2; }
            .faq-section { order: 3; }
        }

        .card{background:white;border-radius:var(--radius);padding:20px;border:1px solid #eef2f6;box-shadow:0 6px 18px rgba(12,12,12,0.03)}
        .card h2 {font-size: 24px; margin-bottom: 12px; border-bottom: 1px solid #f0f0f0; padding-bottom: 8px;}

        /* Tabs */
        .tabs{display:flex;gap:10px;flex-wrap:wrap;margin-bottom:12px}
        .tab{padding:8px 14px;border-radius:999px;background:transparent;border:1px solid var(--accent);color:var(--accent);cursor:pointer;font-weight:600;font-family: inherit; transition: all .2s;}
        .tab.active{background:var(--accent);color:#fff;border-color:var(--accent);box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);}
        
        /* Units Grid - PC/Tablet */
        .units-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
        @media(max-width:1000px){.units-grid{grid-template-columns:repeat(2,1fr)}}
        @media(max-width:640px){.units-grid{grid-template-columns:1fr}}

        /* Units Card - Mobile Horizontal Layout */
        @media(max-width:640px){
            .unit-card{
                display: flex; /* Horizontal structure */
                border: 1px solid #eef2f6; /* Ensure border visibility */
            }
            .unit-media{
                width: 120px; /* Fixed image width */
                height: auto; /* Allow height to adjust */
                border-bottom: none;
                border-left: 1px solid #eee; /* Separator */
            }
            .unit-media img {
                height: 100%;
                object-fit: cover;
                border-radius: var(--radius) 0 0 var(--radius); /* Top-right & Bottom-right radius only for RTL */
            }
            .unit-body{
                padding: 12px;
                flex-grow: 1;
            }
            /* Fix meta layout for tight space */
            .meta { font-size: 12px; gap: 6px; }
            .unit-body h3 { font-size: 16px; margin-top: 0; margin-bottom: 4px; }
            .price { font-size: 16px; }
            .unit-body .btn { font-size: 13px !important; padding: 6px 10px !important; }
        }
        /* End Unit Card - Mobile Horizontal Layout */
        
        .unit-card{border-radius:var(--radius);overflow:hidden;border:1px solid #eef2f6;background:#fff;transition:all .2s}
        .unit-card:hover{transform:translateY(-3px);box-shadow:0 10px 30px rgba(12,12,12,0.08)}
        .unit-media{height:170px;overflow:hidden;border-bottom: 1px solid #eee;}
        .unit-media img{width:100%;height:100%;object-fit:cover;display:block}
        .unit-body{padding:14px}
        .unit-body h3{margin:4px 0 8px;font-size:18px}
        .meta{color:var(--muted);font-size:13px;display:flex;gap:10px;flex-wrap:wrap}
        .meta i {color: var(--accent); margin-left: 3px;}
        .price{color:var(--accent-dark);font-weight:800;font-size: 18px;margin-top:8px}

        /* Features */
        .features{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:12px}
        @media(max-width:900px){.features{grid-template-columns:repeat(2,1fr)}}
        @media(max-width:640px){.features{grid-template-columns:1fr}}
        
        .feat{background:#fff;padding:12px;border-radius:10px;border:1px solid #eef3ff;display:flex;gap:12px;align-items:flex-start;box-shadow:0 2px 8px rgba(0,0,0,0.03);}
        .feat i{font-size:24px;color:var(--accent);flex-shrink: 0;}
        .feat h4{margin:0;font-size:16px}
        .feat p{margin:4px 0 0;color:var(--muted);font-size:13px}

        /* ==================================== ASIDE (RIGHT COLUMN) ==================================== */
        aside .sticky{position:sticky;top:20px}
        
        /* Help Box */
        .help-box{background:linear-gradient(180deg,rgba(11,118,239,0.06),rgba(11,118,239,0.02));padding:18px;border-radius:var(--radius);border:1px solid rgba(11,118,239,0.08)}
        .help-box h4{margin:0 0 10px; color: var(--accent-dark);}
        .help-field input, .help-field select, .help-field textarea{margin-bottom: 8px; padding:10px; border-radius:8px; border:1px solid #e7eaee; font-size:14px; width:100%; box-sizing:border-box; font-family: inherit;}
        .btn{display:inline-block;padding:10px 14px;border-radius:10px;background:var(--accent);color:white;text-decoration:none;font-weight:700;text-align:center;border:none;cursor:pointer;transition: background .2s;}
        .btn:hover {background: var(--accent-dark);}

        /* Developer */
        .developer{display:flex;gap:12px;align-items:center}
        .developer img{width:64px;height:64px;object-fit:cover;border-radius:8px;border:1px solid #eee;}

        /* Map */
        #map{height:280px;border-radius:10px;border:1px solid #eef2f6;overflow:hidden}
        .map-buttons {margin-top:8px;display:flex;gap:8px;flex-wrap:wrap;}
        .map-buttons .btn {font-size: 14px; padding: 8px 12px !important;}
        
        /* Pricing */
        .pricing{display:flex;gap:12px;flex-wrap:wrap;margin-top:12px}
        .plan{flex:1;min-width:200px;border-radius:10px;padding:15px;border:1px solid #eee;background:#fff;box-shadow:0 2px 8px rgba(0,0,0,0.03);}
        .plan h3{margin:0 0 8px; color: var(--accent);}
        .plan ul li {color:var(--muted);font-size:14px;}
        
        /* FAQ */
        .faq .q{margin-bottom:8px}
        .faq summary{font-weight:700;cursor:pointer;padding:12px 15px;border-radius:8px;background:#fff;border:1px solid #f1f5f9;list-style:none;transition: all .2s;}
        .faq summary:hover {background: #f6f6f6;}

        /* Footer */
        footer.small{margin-top:22px;color:var(--muted);font-size:13px;text-align:center}
        
        /* ==================================== WIDGETS (Desktop/Mobile Handling) ==================================== */
        .floating-contact {
            position: fixed;
            left: 20px;
            bottom: 20px;
            z-index: 1000;
        }

        .floating-contact a {
            display: block;
            width: 55px;
            height: 55px;
            line-height: 55px;
            text-align: center;
            border-radius: 50%;
            color: white;
            font-size: 28px;
            margin-bottom: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s;
        }

        .floating-contact a:hover { transform: scale(1.1); }
        .floating-contact .whatsapp { background-color: #25d366; } 
        .floating-contact .phone { background-color: var(--accent); }

        /* STICKY CTA (Mobile Only) */
        .sticky-footer-cta{
            display: none; /* Hide by default */
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            padding: 10px 16px;
            box-shadow: 0 -2px 15px rgba(0,0,0,0.1);
            z-index: 1001;
            justify-content: space-around;
            gap: 10px;
        }
        @media (max-width: 640px) {
            .sticky-footer-cta{
                display: flex; /* Show only on mobile */
            }
            .floating-contact { display: none !important; } /* Hide floating circles on mobile */
        }

        .cta-btn{
            flex: 1;
            padding: 10px 0;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 700;
            text-align: center;
            color: white;
            text-decoration: none;
            transition: opacity 0.2s;
        }
        .cta-btn i{margin-left: 6px;}
        .whatsapp-cta{background-color: #25d366;}
        .phone-cta{background-color: var(--accent);}
        
    </style>
</head>
<body>

    {% include header-ar.html %}

    <main class="container">
        <nav class="breadcrumbs">
            <a href="https://islamproperty.com/index.html">الرئيسية</a>
            <i class="fa-solid fa-chevron-left"></i>
            <a href="https://islamproperty.com/sokhna.html">العين السخنة</a>
            <i class="fa-solid fa-chevron-left"></i>
            <span aria-current="page">بورتو السخنة</span>
        </nav>

        <section class="hero card">
            <div class="hero-inner">
                <div class="hero-left">
                    <h1>بورتو السخنة — Porto Sokhna</h1>
                    <p>منتجع متكامل في العين السخنة يجمع بين الشاطئ والجبل، مرافق فندقية، أكوا بارك، حمامات سباحة، ومساحات استثمارية وتجارية — تجربة منتجعية متكاملة للمقيمين والمستثمرين.</p>
                    
                    <div class="kpis" style="margin-top:12px">
                        <div class="kpi">
                            <i class="fa-solid fa-expand" style="color:var(--accent);"></i>
                            مساحة المشروع
                            <div style="font-size:14px; font-weight: 400;">2.5 مليون م²</div>
                        </div>
                        <div class="kpi">
                            <i class="fa-solid fa-money-bill-wave" style="color:var(--accent);"></i>
                            بداية الأسعار
                            <div style="font-size:14px; font-weight: 400;">ج.م 1,300,000</div>
                        </div>
                        <div class="kpi">
                            <i class="fa-solid fa-location-dot" style="color:var(--accent);"></i>
                            الموقع
                            <div style="font-size:14px; font-weight: 400;">العين السخنة</div>
                        </div>
                    </div>

                    <div class="search-box">
                        <input id="siteSearch" placeholder="ابحث عن وحده، مساحة، رقم..." autocomplete="off" />
                        <div id="suggest" role="listbox"></div>
                    </div>

                    <div class="gallery">
                        <img src="https://k.top4top.io/p_3616qt1oi2.jpg" alt="porto small1">
                        <img src="https://a.top4top.io/p_3616ewulc4.jpg" alt="porto small2">
                        <img src="https://j.top4top.io/p_361686zoo1.jpg" alt="porto small3">
                        <img src="https://i.top4top.io/p_3616z5d3s0.jpg" alt="porto small4">
                        <img src="https://h.top4top.io/p_3616u2k9g9.jpg" alt="porto small5">
                    </div>
                </div>

                <div class="hero-right">
                    <img src="https://k.top4top.io/p_3616qt1oi2.jpg" alt="Porto Sokhna hero">
                </div>
            </div>
        </section>

        <div class="layout">

            <div>
                
                <section class="card units-section">
                    <h2>الوحدات المتاحة</h2>
                    <div class="tabs">
                        <button class="tab active" data-filter="all">الكل</button>
                        <button class="tab" data-filter="developer">المطور</button>
                        <button class="tab" data-filter="resale">إعادة البيع</button>
                    </div>
                    <div id="unitsGrid" class="units-grid" aria-live="polite"></div>
                    <div style="text-align:center;margin-top:12px">
                        <button id="loadMore" class="btn">تحميل المزيد</button>
                    </div>
                </section>

                <section class="card description-section" style="margin-bottom:14px">
                    <h2>عن بورتو السخنة</h2>
                    <p style="color:var(--muted);line-height:1.6">
                        يقع منتجع <strong>بورتو السخنة</strong> في قلب العين السخنة، ويمزج بين الإطلالات البحرية والتضاريس الجبلية ليمنح سكانه مناظر بانورامية فريدة. يمتد المشروع على مساحة واسعة ويضم شواطئ خاصة، أكوا بارك، فنادق، مرافق رياضية ومناطق تجارية وترفيهية. يوفر المشروع وحدات متنوعة (استوديو، شاليه، شقق فندقية، فيلات) مصممة لتناسب العائلات والمستثمرين الباحثين عن دخل إيجاري مستقر أو ملاذ عطلات فاخرة.
                    </p>

                    <h3 style="margin-top:20px">مميزات المشروع الرئيسية</h3>
                    <div class="features">
                        <div class="feat">
                            <i class="fa-solid fa-water"></i>
                            <div>
                                <h4>شاطئ خاص</h4>
                                <p>شواطئ رملية ومساحات للاسترخاء والأنشطة المائية.</p>
                            </div>
                        </div>

                        <div class="feat">
                            <i class="fa-solid fa-person-swimming"></i>
                            <div>
                                <h4>حمامات سباحة متعددة</h4>
                                <p>مساحات مخصصة للبالغين والأطفال ومسابح داخلية وخارجية.</p>
                            </div>
                        </div>

                        <div class="feat">
                            <i class="fa-solid fa-water-ladder"></i>
                            <div>
                                <h4>أكوا بارك</h4>
                                <p>مدينة مائية تناسب العائلات وتزيد من جاذبية الزائرين.</p>
                            </div>
                        </div>

                        <div class="feat">
                            <i class="fa-solid fa-building-circle-check"></i>
                            <div>
                                <h4>مرافق ترفيهية وتجارية</h4>
                                <p>مول متكامل، مطاعم، مقاهي ومحلات تجارية.</p>
                            </div>
                        </div>

                        <div class="feat">
                            <i class="fa-solid fa-futbol"></i>
                            <div>
                                <h4>ملاعب وأنشطة رياضية</h4>
                                <p>ملاعب لكرة القدم، ملاعب شاطئية ومسارات جري.</p>
                            </div>
                        </div>

                        <div class="feat">
                            <i class="fa-solid fa-hotel"></i>
                            <div>
                                <h4>خدمات فندقية</h4>
                                <p>فنادق وخيارات إقامة فاخرة للزوار والمستثمرين.</p>
                            </div>
                        </div>
                    </div>

                    <h3 style="margin-top:20px">خطة الدفع (بوليسة الأسعار)</h3>
                    <p class="text-muted" style="color:var(--muted)">
                        الأسعار قابلة للتغيير حسب مرحلة التسليم والعروض والمطور. للتفاصيل النهائية والتسهيلات اتصل بمكتب المبيعات.
                    </p>

                    <div class="pricing">
                        <div class="plan">
                            <h3>دفع كاش</h3>
                            <p>خصم خاص عند السداد النقدي النهائي.</p>
                            <ul style="color:var(--muted);font-size:14px">
                                <li>سعر البداية: ج.م 1,300,000</li>
                                <li>تسليم فورى / فترات محددة حسب الوحدة</li>
                            </ul>
                        </div>

                        <div class="plan">
                            <h3>تقسيط على المطور</h3>
                            <p>خطط سداد مرنة حتى 8 سنوات مع دفعات شهرية.</p>
                            <ul style="color:var(--muted);font-size:14px">
                                <li>دفعة أولى متغيرة</li>
                                <li>جداول أقساط حسب نوع الوحدة</li>
                            </ul>
                        </div>

                        <div class="plan">
                            <h3>إعادة البيع</h3>
                            <p>وحدات جاهزة بسعر السوق — مفيدة لمن يريد السكن الفوري أو استلامًا سريعًا.</p>
                        </div>
                    </div>

                </section>

                <div class="card legal-disclaimer faq-section" style="margin-top:20px; padding:15px; border-left: 4px solid #ffab00; background: #fffaf0;">
                    <h3 style="margin:0; font-size:16px; color:#c77700;"><i class="fa-solid fa-triangle-exclamation" style="margin-left: 6px;"></i> إخلاء مسؤولية</h3>
                    <p style="color:var(--muted); font-size:13px; margin: 8px 0 0;">الأسعار ومخططات الدفع المذكورة عرضة للتغيير من قبل المطور دون إشعار مسبق. يُرجى التواصل معنا للتأكد من أحدث التفاصيل والتوافر.</p>
                </div>
                
                <section class="card faq faq-section" style="margin-top:12px">
                    <h2>الأسئلة الشائعة</h2>

                    <details class="q"><summary>أين تقع بورتو السخنة؟</summary>
                        <p style="color:var(--muted);margin:8px 0">تقع بورتو السخنة على ساحل البحر الأحمر بالقرب من العين السخنة، على مسافة قريبة من القاهرة عبر طريق السويس.</p>
                    </details>

                    <details class="q"><summary>ما هي أنواع الوحدات المتاحة؟</summary>
                        <p style="color:var(--muted);margin:8px 0">شاليهات، استوديو، شقق فندقية وفيلا — مساحات وأسعار مختلفة لتناسب الاستخدام السياحي والسكني والاستثماري.</p>
                    </details>

                    <details class="q"><summary>هل يمكن الدفع بالتقسيط؟</summary>
                        <p style="color:var(--muted);margin:8px 0">نعم — هناك خطط تقسيط من المطور وخيارات دفع متنوعة. اتصل لمزيد من التفاصيل.</p>
                    </details>

                </section>

                <footer class="small">المعلومات عرضة للتغيير — تواصل معنا للتأكد من أحدث الأسعار والعروض.</footer>
            </div>

            <aside>
                <div class="sticky">
                    <div class="help-box card">
                        <h4>تحتاج إلى مساعدة عقارية؟</h4>
                        <div class="help-field">
                            <input id="help-name" placeholder="الاسم" />
                            <input id="help-phone" placeholder="رقم الموبايل" />
                            <select id="help-interest">
                                <option value="">نوع الوحدة المهتم بها</option>
                                <option value="شاليه">شاليه</option>
                                <option value="شقة">شقة</option>
                                <option value="فيلا">فيلا</option>
                            </select>
                            <textarea id="help-note" rows="3" placeholder="ملاحظات"></textarea>
                            <button id="help-send" class="btn" style="width: 100%; margin-top: 10px;">اطلب اتصال</button>
                        </div>

                        <div style="margin-top:12px; border-top: 1px solid rgba(0,0,0,0.05); padding-top: 12px;">
                            <strong>اتصل سريعاً</strong>
                            <div style="color:var(--muted);margin-top:6px">
                                <i class="fa-solid fa-phone" style="color: var(--accent);"></i>
                                0102602107 — اسلام اسماعيل
                            </div>
                            <div style="color:var(--muted);margin-top:6px">
                                <i class="fab fa-whatsapp" style="color: #25d366;"></i>
                                <a href="https://wa.me/20102602107" target="_blank" style="color: #25d366;">تواصل واتساب</a>
                            </div>
                        </div>
                    </div>

                    <div class="card" style="margin-top:12px">
                        <h3>عن المطور</h3>
                        <div class="developer">
                            <img src="https://a.top4top.io/p_3616ewulc4.jpg" alt="developer logo">
                            <div>
                                <h4>Porto Group</h4>
                                <p style="color:var(--muted);margin:6px 0; font-size: 14px;">مطور عقاري معروف بسلسلة مشاريع متكاملة في مناطق ساحلية وسياحية. لديهم خبرة في إنشاء منتجعات متكاملة ومرافق فندقية.</p>
                                <a href="#" style="font-size:14px">مشروعات أخرى لبورتو</a>
                            </div>
                        </div>
                    </div>

                    <div class="card" style="margin-top:12px">
                        <h3>موقع بورتو السخنة</h3>
                        <div id="map"></div>
                        <div class="map-buttons">
                            <button id="btn-osm" class="btn" style="background:var(--accent);padding:8px 10px">خريطة عادية</button>
                            <button id="btn-sat" class="btn" style="background:#111;padding:8px 10px">ساتلايت</button>
                        </div>
                    </div>

                </div>
            </aside>

        </div>
    </main>

    {% include footer-ar.html %}

    <div class="floating-contact">
        <a href="https://wa.me/20102602107" target="_blank" class="whatsapp" title="تواصل واتساب">
            <i class="fab fa-whatsapp"></i>
        </a>
        <a href="tel:+20102602107" class="phone" title="اتصال مباشر">
            <i class="fa-solid fa-phone-volume"></i>
        </a>
    </div>
    
    <div class="sticky-footer-cta">
        <a href="https://wa.me/20102602107" target="_blank" class="cta-btn whatsapp-cta">
            <i class="fab fa-whatsapp"></i> واتساب
        </a>
        <a href="tel:+20102602107" class="cta-btn phone-cta">
            <i class="fa-solid fa-phone-volume"></i> اتصال الآن
        </a>
    </div>
    
    <script>
    (function(){
        const INPUT = document.getElementById('siteSearch');
        const BOX   = document.getElementById('suggest');
        if(!INPUT || !BOX) return;

        let SITE_INDEX = [];
        // Note: '/search-index.json' must be an actual file path on your server
        fetch('/search-index.json', {cache:'no-store'})
            .then(r => r.json())
            .then(json => SITE_INDEX = Array.isArray(json) ? json : [])
            .catch(() => SITE_INDEX = []);

        const makeItem = it => {
            const a = document.createElement('a');
            a.href = it.url;
            a.textContent = it.title;
            return a;
        };

        function search(q){
            q = (q || '').trim().toLowerCase();
            if(!q) return [];
            return SITE_INDEX
                .map(it=>{
                    const hay = (it.title + ' ' + (it.keywords||'')).toLowerCase();
                    const inTitle = it.title.toLowerCase().includes(q) ? 2 : 0;
                    const inKeys  = hay.includes(q) ? 1 : 0;
                    return {...it, score: inTitle + inKeys};
                })
                .filter(x => x.score > 0)
                .sort((a,b) => b.score - a.score)
                .slice(0,8);
        }

        function render(list){
            BOX.innerHTML = '';
            if(list.length === 0){ BOX.style.display='none'; return; }
            list.forEach(r => BOX.appendChild(makeItem(r)));
            BOX.style.display = 'block';
        }

        INPUT.addEventListener('input', ()=> render(search(INPUT.value)));
        document.addEventListener('click', (e)=>{
            if(!BOX.contains(e.target) && e.target !== INPUT) BOX.style.display='none';
        });
        INPUT.addEventListener('keydown', (e)=>{
            if(e.key === 'Enter'){
                const first = BOX.querySelector('a');
                if(first){ window.location.href = first.href; }
            }
        });
    })();
    </script>

    <script>
    (function(){
        const GRID = document.getElementById('unitsGrid');
        const LOAD = document.getElementById('loadMore');
        let units = [];
        let shown = 0;
        const BATCH = 6;

        function formatEGP(n){
            if(!n && n!==0) return 'سعر حسب المطور';
            // Use Intl for correct Egyptian Arabic formatting
            return new Intl.NumberFormat('ar-EG', { style: 'currency', currency: 'EGP', minimumFractionDigits: 0 }).format(Number(n)).replace('EGP', 'ج.م');
        }

        function renderNext(){
            const chunk = units.slice(shown, shown + BATCH);
            
            if(chunk.length === 0 && shown === 0){
                GRID.innerHTML = '<p style="color:var(--muted); text-align: center; padding: 20px;">لا توجد وحدات للعرض حالياً.</p>';
                LOAD.style.display = 'none';
                return;
            }
            if(chunk.length === 0) {
                 LOAD.style.display = 'none';
                 return;
            }
            
            chunk.forEach(u=>{
                const el = document.createElement('article');
                el.className = 'unit-card';
                el.innerHTML = `
                    <div class="unit-media"><img src="${u.image || 'https://via.placeholder.com/300x170?text=Unit+Image'}" alt="${u.title}"></div>
                    <div class="unit-body">
                        <div class="meta">
                             <strong class="badge" style="color: ${u.listing_type === 'developer' ? 'var(--accent)' : '#111'};">${u.type || 'شاليه'}</strong> 
                             <span style="margin-right:8px;color:var(--muted); font-size: 12px; border: 1px solid #eee; padding: 2px 6px; border-radius: 4px; background: #f9f9f9;">${u.status || 'جاهز للتسليم'}</span>
                        </div>
                        <h3>${u.title || 'وحدة جديدة'}</h3>
                        <div class="meta"><i class="fa-solid fa-ruler-combined"></i> ${u.area? u.area + ' م²' : '—'}</div>
                        <div class="meta" style="margin-top:6px">
                             <i class="fa-solid fa-bed"></i> ${u.bed? u.bed + ' غرف' : '-'} 
                             <i class="fa-solid fa-bath"></i> ${u.bath? u.bath + ' حمام' : '-'}
                        </div>
                        <div class="price">${formatEGP(u.price)}</div>
                        <div style="display:flex;gap:8px;margin-top:12px">
                            <a href="${u.url || '#'}" class="btn" style="background:var(--accent);padding:8px 12px;border-radius:8px; font-size: 14px;">عرض التفاصيل</a>
                            <a href="tel:+20102602107" class="btn" style="background:#111;padding:8px 12px;border-radius:8px; font-size: 14px;">اتصل الآن</a>
                        </div>
                    </div>
                `;
                GRID.appendChild(el);
            });
            shown += chunk.length;
            if(shown >= units.length) LOAD.style.display = 'none';
            else LOAD.style.display = 'inline-block';
        }

        // fetch units from your path
        fetch('/data/portosokhnaunits.json', {cache:'no-store'}).then(r=>{
            if(!r.ok) throw 0;
            return r.json();
        }).then(json=>{
            units = Array.isArray(json) ? json : (Array.isArray(json.units) ? json.units : []);
            window.__allUnitsCache = units.slice();
            renderNext();
            
            // setup tab filters
            document.querySelectorAll('.tab').forEach(btn=>{
                btn.addEventListener('click', ()=>{
                    document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
                    btn.classList.add('active');
                    const f = btn.getAttribute('data-filter');
                    applyFilter(f);
                });
            });
        }).catch(err=>{
            console.error(err);
            GRID.innerHTML = '<p style="color:var(--muted); text-align: center; padding: 20px;">فشل في تحميل بيانات الوحدات. (تأكد من ملف portosokhnaunits.json)</p>';
            LOAD.style.display = 'none';
        });

        function applyFilter(filter){
            GRID.innerHTML = '';
            shown = 0;
            units = window.__allUnitsCache.slice();
            if(filter === 'all'){ renderNext(); return; }
            units = units.filter(u => u.listing_type === filter);
            renderNext();
        }

        LOAD.addEventListener('click', renderNext);

        // help form handler (basic)
        document.getElementById('help-send').addEventListener('click', ()=>{
            const data = {
                name: document.getElementById('help-name').value,
                phone: document.getElementById('help-phone').value,
                interest: document.getElementById('help-interest').value,
                note: document.getElementById('help-note').value,
                project: 'Porto Sokhna'
            };
            // TODO: replace alert with actual AJAX POST to your CRM/API
            alert('طلبك تم إرساله. سيتم التواصل معك قريباً.\n' + JSON.stringify(data));
        });

    })();
    </script>

    <script>
    (function(){
        // Coordinates for Porto Sokhna: Slightly adjusted based on user feedback
        const center = [29.563, 32.315]; 
        const map = L.map('map', {center:center, zoom:13, layers:[]});

        // OSM layer
        const osm = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; OpenStreetMap contributors'
        });

        // ESRI WorldImagery as satellite
        const sat = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
            attribution: 'Tiles &copy; Esri &mdash; Source: Esri'
        });

        osm.addTo(map);

        // marker for Porto Sokhna
        const marker = L.marker(center).addTo(map).bindPopup('<strong>بورتو السخنة</strong><br>العين السخنة').openPopup();
        
        // Fix Leaflet's need for map invalidation on sticky/resize events
        window.addEventListener('load', () => setTimeout(() => map.invalidateSize(), 500));
        window.addEventListener('resize', () => map.invalidateSize());

        document.getElementById('btn-osm').addEventListener('click', ()=>{
            map.eachLayer(l => { if(l !== marker) map.removeLayer(l); });
            osm.addTo(map);
            marker.addTo(map);
        });
        document.getElementById('btn-sat').addEventListener('click', ()=>{
            map.eachLayer(l => { if(l !== marker) map.removeLayer(l); });
            sat.addTo(map);
            marker.addTo(map);
        });

    })();
    </script>

</body>
</html>
