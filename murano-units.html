---
layout: none
title: "وحدات للبيع في مشروع مورانو وادي دجلة - العين السخنة | Islam Real Estate"
permalink: /murano-units.html
---

<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>وحدات للبيع مشروع مورانو وادي دجلة العين السخنة - شاليهات ودوبلكس للبيع</title>
<meta name="description" content="تصفح جميع الوحدات المتاحة للبيع في مشروع مورانو وادي دجلة بالعين السخنة. شاليهات، دوبلكس، واستوديوهات من المطور وإعادة البيع بأسعار تنافسية وتسهيلات في السداد.">
<meta name="keywords" content="مورانو وادي دجلة, وحدات للبيع العين السخنة, شاليهات مورانو, دوبلكس العين السخنة, عقارات مورانو, استثمار عقاري, Murano Wadi Degla">
<meta name="robots" content="index, follow">
<link rel="canonical" href="https://yoursite.com/murano-units.html">
<meta property="og:title" content="وحدات مورانو وادي دجلة العين السخنة للبيع">
<meta property="og:description" content="اكتشف أفضل الوحدات في مشروع مورانو وادي دجلة">
<meta property="og:image" content="https://c.top4top.io/p_3564wfv960.jpg">
<link rel="icon" type="image/png" href="https://d.top4top.io/p_35653w8g80.png">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css"/>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800;900&display=swap" rel="stylesheet" />

<style>
:root {
    --primary-color: #007BFF; /* أزرق للاتصال */
    --accent-color: #25D366; /* أخضر للواتساب */
    --text-dark: #000;
    --text-muted: #666;
    --bg-light: #f9f9f9;
    --border-color: #ddd;
    --radius: 8px;
    --shadow: 0 2px 8px rgba(0,0,0,0.08);
}
* { box-sizing: border-box; margin: 0; padding: 0; }
body { 
    font-family: 'Cairo', sans-serif; 
    background: #fff; 
    color: var(--text-dark); 
    direction: rtl;
    line-height: 1.6;
}
a { text-decoration: none; color: inherit; transition: all 0.3s; }
.container { max-width: 1200px; margin: 0 auto; padding: 0 15px; }

/* ... (كود شريط البحث والـ Breadcrumb كما هو) ... */

.site-search-bar {
    background: var(--bg-light);
    padding: 15px 0;
    margin-bottom: 10px;
    border-bottom: 1px solid var(--border-color);
}
.search-wrapper {
    max-width: 600px;
    margin: 0 auto;
    position: relative;
}
#siteSearch {
    width: 100%;
    padding: 12px 20px;
    border: 1px solid var(--border-color);
    border-radius: 25px;
    font-family: inherit;
    font-size: 15px;
}
#siteSearch:focus { border-color: #000; outline: none; }
#suggest {
    display: none;
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: #fff;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    margin-top: 5px;
    max-height: 300px;
    overflow-y: auto;
    z-index: 200;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}
#suggest a {
    display: block;
    padding: 12px 20px;
    border-bottom: 1px solid var(--bg-light);
    transition: background 0.2s;
}
#suggest a:hover {
    background: var(--bg-light);
}

.breadcrumb { 
    display: flex; 
    gap: 5px; 
    align-items: center;
    padding: 10px 0; 
    font-size: 12px; 
    color: var(--text-muted);
    white-space: nowrap;
    overflow-x: auto;
}
.breadcrumb a { color: var(--text-muted); }
.breadcrumb a:hover { color: var(--primary-color); }

h1.page-title { 
    text-align: center; 
    font-size: 26px; 
    font-weight: 900; 
    margin: 15px 0;
    line-height: 1.3;
}
.separator { 
    width: 60px; 
    height: 4px; 
    background: #000; 
    margin: 10px auto 25px; 
}

.icons-section { text-align: center; margin: 20px 0 35px; }
.icons-row { display: flex; justify-content: center; gap: 30px; flex-wrap: wrap; }
.icon-item { 
    display: flex; 
    flex-direction: column; 
    align-items: center; 
    cursor: pointer;
    transition: transform 0.3s;
}
.icon-item:hover { transform: translateY(-5px); }
.icon-item .icon-box {
    width: 60px;
    height: 60px;
    display: flex;
    justify-content: center;
    align-items: center;
    background: #fff;
    border: 2px solid #000;
    border-radius: var(--radius);
    margin-bottom: 8px;
    transition: all 0.3s;
}
.icon-item:hover .icon-box {
    background: #000;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
}
.icon-item img { 
    width: 32px; 
    height: 32px; 
    transition: filter 0.3s;
}
.icon-item:hover img { filter: invert(1); }
.icon-item span { 
    font-size: 13px; 
    font-weight: 600; 
}

.filters-section { text-align: center; margin: 25px 0; }
.tabs { display: inline-flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
.tabs button { 
    padding: 10px 24px; 
    border: 2px solid var(--border-color); 
    border-radius: 25px; 
    cursor: pointer; 
    background: #fff; 
    font-weight: 700;
    transition: all 0.3s;
    font-family: inherit;
    font-size: 15px;
}
.tabs button:hover:not(.active) { border-color: #000; }
.tabs button.active { background: var(--primary-color); color: #fff; border-color: var(--primary-color); }

.units-search { max-width: 500px; margin: 0 auto 30px; }
#unitsFilter {
    width: 100%;
    padding: 12px 20px;
    border: 1px solid var(--border-color);
    border-radius: 25px;
    font-family: inherit;
    font-size: 16px;
}
#unitsFilter:focus { border-color: #000; outline: none; }

.section-heading {
    font-size: 24px;
    font-weight: 800;
    margin: 35px 0 20px;
    color: #000;
    text-align: right;
}

.section-box {
    padding: 25px;
    margin-bottom: 35px;
    border-radius: var(--radius);
    background: var(--bg-light);
    border: 1px solid var(--border-color);
}

.cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }

/* START: DESKTOP CARD LAYOUT (HORIZONTAL - IMPROVED) - Default setting */
.unit-card { 
    background: #fff; 
    border-radius: var(--radius); 
    box-shadow: var(--shadow); 
    overflow: hidden; 
    transition: all 0.3s;
    border: 1px solid var(--border-color);
    display: flex; 
    flex-direction: row-reverse; /* Horizontal stack: Image on the right */
    min-height: 200px; /* Increased min-height for better look on desktop */
}
.unit-card:hover { box-shadow: 0 6px 20px rgba(0,0,0,0.15); transform: translateY(-5px); }

.card-header { 
    position: relative; 
    width: 30%; /* Image width on desktop */
    min-width: 180px;
    overflow: hidden;
    /* Maintain aspect ratio close to 1:1, but slightly taller for a modern look */
    padding-top: 30%; 
    position: relative;
}
.card-header a { 
    display: block;
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
}
.card-header img { 
    width: 100%; 
    height: 100%; 
    object-fit: cover; 
    position: absolute;
    top: 0; left: 0;
}
.card-badge {
    position: absolute;
    top: 8px;
    right: 8px;
    background: #28a745;
    color: white;
    padding: 5px 10px;
    border-radius: 5px;
    font-weight: 700;
    font-size: 12px;
    z-index: 10;
}
.card-badge.developer { background: var(--primary-color); }

.card-body { 
    padding: 15px 20px; /* Slightly more padding for desktop */
    width: 70%; /* Content width on desktop */
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}
.card-body h3 { 
    font-size: 18px; 
    font-weight: 800; 
    margin: 0 0 5px; 
    color: #000; 
    line-height: 1.2;
}
.card-location { 
    font-size: 13px; 
    color: var(--text-muted); 
    margin-bottom: 5px; 
}
.card-type {
    font-size: 14px;
    font-weight: 700;
    margin-bottom: 10px;
    color: #000;
}

/* Icons Row Layout */
.card-details-row {
    display: flex;
    justify-content: space-between; 
    gap: 15px; 
    flex-wrap: wrap;
    padding: 10px 0;
    margin-bottom: 10px;
    border-top: 1px solid var(--border-color);
    border-bottom: 1px solid var(--border-color);
}
.card-detail { 
    font-size: 13px; 
    display: flex; 
    align-items: center; 
    gap: 4px; 
    font-weight: 600;
}
.card-detail img { 
    width: 18px; 
    height: 18px; 
}

.card-delivery {
    font-size: 14px; 
    color: var(--text-muted); 
    margin-bottom: 10px;
    font-weight: 600;
}

.card-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 5px;
    padding-top: 5px;
}
.card-price { 
    color: #dc3545; 
    font-size: 18px; 
    font-weight: 900; 
}
.card-actions { 
    display: flex; 
    gap: 10px; 
}
.card-actions a {
    width: 38px; 
    height: 38px;
    display: flex;
    justify-content: center;
    align-items: center;
    border-radius: 50%;
    transition: transform 0.2s;
}
.card-actions a:hover { transform: scale(1.1); }
.card-actions .whatsapp-btn-card { background: var(--accent-color); } 
.card-actions .call-btn-card { background: var(--primary-color); } 
.card-actions img { width: 18px; height: 18px; }
/* END: DESKTOP CARD LAYOUT */


/* START: MOBILE CARD LAYOUT (HORIZONTAL - COMPACT) - Applies below 768px */
@media (max-width: 768px) {
    .unit-card { 
        min-height: 150px; 
        flex-direction: row-reverse; 
    }
    
    .card-header {
        width: 40%; 
        min-width: 130px;
        /* Force square aspect ratio (1:1) for mobile as requested */
        padding-top: 40%; 
    }
    
    .card-body { 
        width: 60%; 
        padding: 10px;
    }

    /* Adjust font and details sizes for mobile */
    .card-body h3 {
        font-size: 14px; 
        margin-bottom: 3px;
    }
    .card-location, .card-type, .card-delivery, .card-detail {
        font-size: 10px; 
    }
    .card-type { margin-bottom: 5px; }
    .card-delivery { margin-bottom: 5px; }

    .card-details-row {
        gap: 4px;
        padding: 4px 0;
        margin-bottom: 5px;
    }
    .card-detail img { 
        width: 14px; 
        height: 14px; 
    }

    .card-price {
        font-size: 14px;
    }
    .card-actions a {
        width: 30px; 
        height: 30px;
    }
    .card-actions img {
        width: 14px;
        height: 14px;
    }
}
/* END: MOBILE CARD LAYOUT */

.empty-state { text-align: center; padding: 40px 20px; color: var(--text-muted); }

/* ... (بقية الـ CSS لروابط الاقتراحات ونموذج الاتصال كما هو) ... */

.suggestions-links {
    display: flex;
    flex-direction: column;
    gap: 15px;
}
.suggestion-link {
    background: #fff;
    border: 1px solid var(--border-color);
    border-radius: var(--radius);
    margin-bottom: 12px;
    padding: 15px;
}
.suggestion-link {
    background: #fff;
    padding: 18px;
    border-radius: var(--radius);
    border: 1px solid var(--border-color);
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: all 0.3s;
    cursor: pointer;
}
.suggestion-link:hover {
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    border-color: #000;
}
.suggestion-link h3 {
    margin: 0;
    font-size: 18px;
    font-weight: 700;
}
.suggestion-link span {
    font-weight: 700;
    font-size: 14px;
}

.contact-form-section {
    background: #fff;
    padding: 35px;
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    text-align: center;
    border: 1px solid var(--border-color);
    margin-bottom: 40px;
}
.contact-form-section h2 {
    font-size: 26px;
    font-weight: 800;
    color: #000;
    margin-bottom: 10px;
}
.contact-form-section p {
    color: var(--text-muted);
    margin-bottom: 25px;
}
.contact-form-section form {
    display: grid;
    gap: 15px;
    max-width: 650px;
    margin: 0 auto;
}
.contact-form-section input,
.contact-form-section select,
.contact-form-section textarea {
    width: 100%;
    padding: 12px 15px;
    border: 1px solid var(--border-color);
    border-radius: 6px;
    font-family: inherit;
    font-size: 15px;
    text-align: right; 
}
.contact-form-section input::placeholder,
.contact-form-section textarea::placeholder {
    color: #aaa;
    text-align: right;
}
.contact-form-section select {
    appearance: none; 
    background: #fff url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12"><path fill="%23000" d="M10.293 3.293L6 7.586 1.707 3.293A1 1 0 0 0 .293 4.707l5 5a1 1 0 0 0 1.414 0l5-5a1 1 0 0 0-1.414-1.414z"/></svg>') no-repeat left 15px center;
}

.unit-type-group select {
    text-align: right;
    width: 100%;
    padding: 12px 15px;
    border: 1px solid var(--border-color);
    border-radius: 6px;
    font-family: inherit;
    font-size: 15px;
}

.form-actions-buttons { display: flex; gap: 12px; margin-top: 20px; }
.form-actions-buttons button {
    padding: 13px 20px;
    border: none;
    border-radius: 6px;
    font-weight: 700;
    cursor: pointer;
    width: 100%;
    font-family: inherit;
    font-size: 15px;
    transition: opacity 0.3s;
}
.form-actions-buttons button:hover { opacity: 0.9; }
.form-actions-buttons .whatsapp-btn { background: var(--accent-color); color: #fff; }
.form-actions-buttons .email-btn { background: #000; color: #fff; }

.whatsapp-float {
    position: fixed;
    bottom: 25px;
    left: 25px;
    background-color: var(--accent-color);
    width: 55px;
    height: 55px;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    z-index: 1000;
    transition: transform 0.3s;
}
.whatsapp-float:hover { transform: scale(1.1); }
.whatsapp-float img { width: 26px; height: 26px; }

.faq-list details {
    background: #fff;
    border: 1px solid var(--border-color);
    border-radius: var(--radius);
    margin-bottom: 12px;
    padding: 15px;
}
.faq-list summary {
    font-weight: 700;
    cursor: pointer;
    font-size: 16px;
}
.faq-list p {
    margin-top: 10px;
    color: var(--text-muted);
    line-height: 1.7;
}

/* ... (نهاية كود الـ CSS العام) ... */

</style>
</head>
<body>

{% include header-ar.html %}

<div class="site-search-bar">
    <div class="container">
        <div class="search-wrapper">
            <input type="text" id="siteSearch" placeholder="ابحث في الموقع...">
            <div id="suggest"></div>
        </div>
    </div>
</div>

<div class="container">
    <div class="breadcrumb">
        <a href="/">الرئيسية</a> <span>»</span>
        <a href="/ain-sokhna">العين السخنة</a> <span>»</span>
        <a href="/murano.html">مورانو</a> <span>»</span>
        <span>وحدات متاحة</span>
    </div>

    <h1 class="page-title">وحدات متاحة للبيع في مشروع مورانو وادي دجلة - العين السخنة</h1>
    <div class="separator"></div>

    <div class="icons-section">
        <div class="icons-row">
            <a class="icon-item" data-fancybox="gallery" href="#photos">
                <div class="icon-box"><img src="https://c.top4top.io/p_3564sbc0d0.png" alt="صور"></div>
                <span>الصور</span>
            </a>
            <a class="icon-item" data-fancybox href="https://i.top4top.io/m_3524euftk0.mp4">
                <div class="icon-box"><img src="https://e.top4top.io/p_356445xj32.png" alt="فيديو"></div>
                <span>الفيديو</span>
            </a>
            <a class="icon-item" data-fancybox data-src="#map-popup" href="javascript:;">
                <div class="icon-box"><img src="https://d.top4top.io/p_3564912551.png" alt="موقع"></div>
                <span>الموقع</span>
            </a>
        </div>
    </div>

    <div style="display:none;" id="photos">
        <a data-fancybox="gallery" href="https://c.top4top.io/p_3564wfv960.jpg"></a>
        <a data-fancybox="gallery" href="https://d.top4top.io/p_3564b0j821.jpeg"></a>
        <a data-fancybox="gallery" href="https://e.top4top.io/p_35645doza2.jpeg"></a>
        <a data-fancybox="gallery" href="https://f.top4top.io/p_35645oxjc3.jpg"></a>
        <a data-fancybox="gallery" href="https://g.top4top.io/p_3564whend4.jpg"></a>
        <a data-fancybox="gallery" href="https://h.top4top.io/p_356488equ5.jpg"></a>
        <a data-fancybox="gallery" href="https://i.top4top.io/p_3564fopx66.jpg"></a>
        <a data-fancybox="gallery" href="https://j.top4top.io/p_35648q42a7.jpg"></a>
        <a data-fancybox="gallery" href="https://k.top4top.io/p_3564p17n68.jpg"></a>
        <a data-fancybox="gallery" href="https://l.top4top.io/p_35642y2h19.jpg"></a>
    </div>

    <div style="display:none;" id="map-popup">
        <h3 style="text-align:center; padding:15px; background:#f1f1f1; margin:0;">موقع مشروع مورانو</h3>
        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d11277.675604100523!2d32.42852264906963!3d29.58988226922241!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x14532b260909f197%3A0x6a21e428c4608c02!2sMurano%20Wadi%20Degla%20Al%20Ain%20Al%20Sokhna!5e0!3m2!1sen!2seg!4v1700000000000!5m2!1sen!2seg" width="800" height="500" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
        <p style="text-align:center; font-size:14px; padding:10px; margin:0; color:var(--text-muted);">
            H8VR+554 Murano Wadi Degla Al Ain Al Sokhna, عتاقة، محافظة السويس 8128020
        </p>
    </div>

    <div class="filters-section">
        <div class="tabs">
            <button class="active" data-filter="all">الكل</button>
            <button data-filter="developer">المطور</button>
            <button data-filter="resale">إعادة البيع</button>
        </div>
        <div class="units-search">
            <input type="text" id="unitsFilter" placeholder="ابحث باسم الوحدة أو الكود...">
        </div>
    </div>

    <h2 class="section-heading">الوحدات المتاحة حالياً في مورانو</h2>
    <div class="section-box">
        <div id="units-container" class="cards">
            <div class="empty-state">جاري تحميل الوحدات...</div>
        </div>
    </div>

    <h2 class="section-heading">وحدات مقترحة قد تهمك</h2>
    <div class="section-box">
        <div id="suggestions-container" class="suggestions-links">
            <div class="empty-state">لا توجد وحدات مقترحة محددة حاليًا.</div>
        </div>
    </div>

    <h2 class="section-heading">الأسئلة الشائعة حول مشروع مورانو (FAQ)</h2>
    <div class="section-box">
        <div class="faq-list">
            <details>
                <summary>ما هي أسعار الوحدات في مشروع مورانو؟</summary>
                <p>تختلف الأسعار حسب نوع الوحدة ومساحتها ونظام السداد. تبدأ أسعار الشاليهات من 5 مليون جنيه تقريباً، بينما الدوبلكس والوحدات الأكبر قد تصل إلى 15 مليون جنيه أو أكثر حسب المواصفات.</p>
            </details>
            <details>
                <summary>ما الفرق بين وحدات المطور وإعادة البيع؟</summary>
                <p>وحدات المطور جديدة تماماً وتأتي مع تسهيلات سداد على سنوات، بينما وحدات إعادة البيع عادة مستعملة أو جاهزة للتسليم الفوري وتتطلب دفعة أكبر مقدماً ولكن بأسعار قد تكون أقل.</p>
            </details>
            <details>
                <summary>هل يوجد أنظمة تقسيط متاحة؟</summary>
                <p>نعم، وحدات المطور توفر أنظمة تقسيط مريحة قد تصل إلى 8 سنوات مع مقدم يبدأ من 10-20%. أما وحدات إعادة البيع فغالباً تكون نقدية أو بتقسيط قصير المدى.</p>
            </details>
            <details>
                <summary>ما هي المرافق والخدمات المتوفرة في مورانو؟</summary>
                <p>يوفر المشروع شاطئ خاص، حمامات سباحة متعددة، مطاعم وكافيهات، نادي صحي، ملاعب رياضية، منطقة ألعاب أطفال، خدمات أمن وحراسة 24 ساعة، وخدمات صيانة دورية.</p>
            </details>
            <details>
                <summary>كيف يمكنني حجز وحدة أو الاستفسار عن التفاصيل؟</summary>
                <p>يمكنك التواصل معنا مباشرة عبر الهاتف 01050072527 أو واتساب، أو ملء نموذج الاستفسار أدناه وسنتواصل معك في أقرب وقت لتقديم كافة التفاصيل ومساعدتك في اختيار الوحدة المناسبة.</p>
            </details>
        </div>
    </div>

    <div class="contact-form-section">
        <h2>تحتاج إلى مساعدة عقارية؟</h2>
        <p>املأ بياناتك وسنعاود الاتصال بك قريبًا لمعرفة أفضل العروض</p>
        
        <form id="contactForm">
            <input type="text" id="formName" placeholder="الاسم الكامل" required>
            <input type="tel" id="formPhone" placeholder="+20 10xxxxxxxx" required pattern="[0-9]{11,}">
            <input type="email" id="formEmail" placeholder="you@example.com (اختياري)">
            
            <select id="formProject">
                <option value="Murano Wadi Degla Sokhna" selected>Murano Wadi Degla Sokhna</option>
                <option value="Other">مشروع آخر</option>
            </select>

            <div class="unit-type-group">
                <select id="formUnitType" required>
                    <option value="شاليه" selected>شاليه</option>
                    <option value="فيلا">فيلا</option>
                    <option value="استوديو">استوديو</option>
                    <option value="توين هاوس">توين هاوس</option>
                    <option value="تاون هاوس">تاون هاوس</option>
                    <option value="شقة">شقة</option>
                    <option value="أخرى">نوع آخر من الوحدات</option>
                </select>
            </div>

            <input type="text" id="formBudget" placeholder="مثال: من 2,500,000 إلى 4,000,000 ج.م">
            <textarea id="formNotes" placeholder="اذكر موعد التسليم أو نظام السداد المفضل" rows="3"></textarea>

            <div class="form-actions-buttons">
                <button type="button" class="whatsapp-btn" onclick="sendForm('whatsapp')">
                    إرسال عبر واتساب
                </button>
                <button type="button" class="email-btn" onclick="sendForm('email')">
                    إرسال عبر إيميل
                </button>
            </div>
        </form>
    </div>

</div>

{% include footer-ar.html %}

<a href="https://wa.me/201050072527?text=مرحباً، أود الاستفسار عن وحدات مورانو" class="whatsapp-float" target="_blank">
    <img src="https://l.top4top.io/p_3564hewh21.png" alt="WhatsApp">
</a>

<script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script>

<script>
// Icon URLs (Used in createUnitCard)
const iconUrls = {
    call: 'https://g.top4top.io/p_356528fhl1.png',      // أيقونة الاتصال الزرقاء
    whatsapp: 'https://f.top4top.io/p_3565pjntb0.png', // أيقونة الواتساب الخضراء
    rooms: 'https://e.top4top.io/p_3565cgz7n0.png',      
    bathrooms: 'https://f.top4top.io/p_3565iewc51.png', 
    area: 'https://g.top4top.io/p_3565j5ijc2.png',     
};

let allUnits = []; 
let allSuggestions = []; 
const defaultUnitLocation = 'العين السخنة، طريق الزعفرانة';
const defaultUnitType = 'شاليه'; 
const specificDeliveryYear = '2028'; 
const contactPhoneNumber = '201050072527'; 

/**
 * Creates the HTML markup for a single unit card (HORIZONTAL LAYOUT - ALL SCREENS).
 * @param {object} unit - The unit data object.
 */
function createUnitCard(unit) {
    const unitType = unit.unitType || (unit.title.includes('شاليه') ? 'شاليه' : (unit.title.includes('فيلا') ? 'فيلا' : defaultUnitType));
    const isResale = unit.type === 'resale';
    const badgeText = isResale ? 'إعادة بيع' : 'المطور';
    const badgeClass = isResale ? 'card-badge' : 'card-badge developer';
    
    // Fallback values
    const unitId = unit.id || 'N/A';
    const title = unit.title || `${unitType} - كود ${unitId}`;
    const rooms = unit.bed || 0;
    const bathrooms = unit.bath || 0;
    const size = unit.area || 'غير محدد';
    const price = unit.price || 'عند الاتصال';
    const link = unit.link || '#'; 
    
    // Use delivery_year if available, otherwise use default 2028
    const delivery = unit.delivery_year || specificDeliveryYear; 

    const mainImage = Array.isArray(unit.images) && unit.images.length > 0 
                      ? unit.images[0] 
                      : 'https://d.top4top.io/p_3564b0j821.jpeg'; 

    const whatsappText = `مرحباً، أود الاستفسار عن الوحدة كود: ${unitId} في مورانو. العنوان: ${title}`;
    const whatsappLink = `https://wa.me/${contactPhoneNumber}?text=${encodeURIComponent(whatsappText)}`;
    const callLink = `tel:+${contactPhoneNumber}`;

    return `
        <div class="unit-card" data-filter="${unit.type}">
            <div class="card-body">
                <div>
                    <p class="card-location">${defaultUnitLocation}</p>
                    
                    <a href="${link}" title="${title}">
                        <h3>${title}</h3>
                    </a>
                    
                    <p class="card-type">${unitType}</p>
                    
                    <div class="card-details-row">
                        <span class="card-detail" title="${rooms} غرف">
                            <img src="${iconUrls.rooms}" alt="Rooms"> 
                            ${rooms} غرف
                        </span>
                        <span class="card-detail" title="${bathrooms} حمام">
                            <img src="${iconUrls.bathrooms}" alt="Bathrooms"> 
                            ${bathrooms} حمام
                        </span>
                        <span class="card-detail" title="${size}">
                            <img src="${iconUrls.area}" alt="Area"> 
                            ${size}
                        </span>
                    </div>

                    <p class="card-delivery">تسليم: ${delivery}</p>
                </div>
                
                <div class="card-footer">
                    <div class="card-price">${price}</div>
                    <div class="card-actions">
                        <a class="whatsapp-btn-card" href="${whatsappLink}" target="_blank" title="تواصل واتساب">
                            <img src="${iconUrls.whatsapp}" alt="WhatsApp">
                        </a>
                        <a class="call-btn-card" href="${callLink}" title="اتصال هاتفي">
                            <img src="${iconUrls.call}" alt="Call"> 
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="card-header">
                <a href="${link}" title="${title}">
                    <img src="${mainImage}" alt="${title}">
                </a>
                <span class="${badgeClass}">${badgeText}</span>
            </div>
        </div>
    `;
}

/**
 * Creates the HTML markup for a single suggestion link.
 * @param {object} unit - The suggestion data object.
 */
function createSuggestionLink(unit) {
    return `
        <a href="${unit.url || '#'}" class="suggestion-link" target="_blank" title="${unit.name}">
            <h3>${unit.name} <small>(${unit.project})</small></h3>
            <span>عرض التفاصيل »</span>
        </a>
    `;
}

/**
 * Renders units or suggestions to a specific container.
 */
function renderData(data, containerId, cardCreator) {
    const container = document.getElementById(containerId);
    if (!container) return;

    container.innerHTML = '';
    
    if (!data || data.length === 0) {
        if (containerId === "units-container") {
             container.innerHTML = '<div class="empty-state">عفواً، لا توجد وحدات متاحة حالياً تطابق البحث.</div>';
        } else if (containerId === "suggestions-container") {
             container.innerHTML = '<div class="empty-state">لا توجد وحدات مقترحة محددة حاليًا.</div>';
        }
        return;
    }

    data.forEach(item => {
        container.innerHTML += cardCreator(item);
    });
}

/**
 * Filters the main unit list based on the active tab and search text.
 */
function filterUnits(filter) {
    document.querySelectorAll(".tabs button").forEach(b => b.classList.remove("active"));
    const activeBtn = document.querySelector(`.tabs button[data-filter="${filter}"]`);
    if(activeBtn) activeBtn.classList.add("active");
    
    document.getElementById('unitsFilter').value = ''; 

    let filtered = allUnits;
    if (filter !== "all") {
        filtered = allUnits.filter(u => u.type === filter);
    }
    
    renderData(filtered, "units-container", createUnitCard);
}

/**
 * Searches the currently displayed unit list based on text input.
 */
function searchUnits() {
    const searchText = document.getElementById('unitsFilter').value.toLowerCase().trim();
    const activeFilter = document.querySelector('.tabs button.active')?.dataset.filter || 'all';
    
    let baseUnits = allUnits;
    if (activeFilter !== 'all') {
        baseUnits = allUnits.filter(u => u.type === activeFilter);
    }
    
    const searched = baseUnits.filter(unit => 
        (unit.title && unit.title.toLowerCase().includes(searchText)) || 
        (unit.id && unit.id.toString().includes(searchText)) ||
        (unit.type && unit.type.toLowerCase().includes(searchText)) ||
        (unit.area && unit.area.toLowerCase().includes(searchText)) ||
        (unit.price && unit.price.toLowerCase().includes(searchText))
    );
    
    renderData(searched, "units-container", createUnitCard);
}


/**
 * Sends the contact form data via WhatsApp or Email.
 */
function sendForm(method) {
    const name = document.getElementById('formName').value.trim();
    const phone = document.getElementById('formPhone').value.trim();
    const email = document.getElementById('formEmail').value.trim();
    const project = document.getElementById('formProject').value;
    const unitType = document.getElementById('formUnitType').value; 
    const budget = document.getElementById('formBudget').value.trim();
    const notes = document.getElementById('formNotes').value.trim();
    
    const targetEmail = 'islammesmail@gmail.com';
    const targetPhone = contactPhoneNumber;

    if (!name || !phone || phone.length < 11 || !/^\+?([0-9]{11,})$/.test(phone)) {
        alert('الرجاء إدخال الاسم ورقم الهاتف بشكل صحيح (11 رقم على الأقل).');
        return;
    }

    const fullMessage = `
*طلب مساعدة عقارية جديد* (من صفحة مورانو)
------------------------------------
الاسم: ${name}
الهاتف: ${phone}
البريد الإلكتروني: ${email || 'غير مُحدد'}
المشروع محل الاهتمام: ${project}
نوع الوحدة المطلوب: ${unitType}
الميزانية التقريبية: ${budget || 'غير مُحدد'}
الملاحظات/التسليم: ${notes || 'لا توجد ملاحظات إضافية.'}
------------------------------------
    `;

    if (method === 'whatsapp') {
        const whatsappLink = `https://wa.me/20${targetPhone}?text=${encodeURIComponent(fullMessage.trim())}`;
        window.open(whatsappLink, '_blank');
    } else if (method === 'email') {
        const subject = encodeURIComponent(`مساعدة عقارية: ${name} - ${project}`);
        const body = encodeURIComponent(fullMessage.trim());
        window.location.href = `mailto:${targetEmail}?subject=${subject}&body=${body}`;
        alert('تم فتح تطبيق البريد الإلكتروني. يرجى مراجعة محتوى الرسالة وإرسالها.');
    }

    // Optional: Reset form after action
    document.getElementById('contactForm').reset();
}


// Function to fetch data from JSON file 
async function loadData() {
    try {
        // IMPORTANT: Ensure this path is correct: /murano-units.json
        const unitsResponse = await fetch('/murano-units.json', {cache:'no-cache'}); 
        let unitsJson = await unitsResponse.json();
        
        if (Array.isArray(unitsJson)) {
            allUnits = unitsJson.filter(unit => unit.status === 'available' && unit.type);
            allSuggestions = []; 
        } else if (unitsJson.units && Array.isArray(unitsJson.units)) {
            allUnits = unitsJson.units.filter(unit => unit.status === 'available' && unit.type);
            allSuggestions = Array.isArray(unitsJson.suggestions) ? unitsJson.suggestions : [];
        } else {
             allUnits = [];
             allSuggestions = [];
        }
        
        // Initial rendering
        renderData(allUnits, "units-container", createUnitCard);
        renderData(allSuggestions, "suggestions-container", createSuggestionLink);
    } catch (error) {
        console.error("Error loading units data:", error);
        document.getElementById("units-container").innerHTML = '<div class="empty-state">عفواً، فشل تحميل الوحدات. الرجاء التأكد من ملف murano-units.json وصيغة البيانات.</div>';
        document.getElementById("suggestions-container").innerHTML = '<div class="empty-state">فشل تحميل الوحدات المقترحة.</div>';
    }
}


// --- Site-wide search functionality (Retained) ---
(function(){
  const INPUT = document.getElementById('siteSearch');
  const BOX   = document.getElementById('suggest');
  if(!INPUT || !BOX) return;

  let SITE_INDEX = [];
  fetch('/search-index.json', {cache:'no-store'})
    .then(r => r.json())
    .then(json => SITE_INDEX = Array.isArray(json) ? json : [])
    .catch(() => SITE_INDEX = []);

  const makeItem = it => {
    const a = document.createElement('a');
    a.href = it.url;
    a.textContent = it.title;
    return a;
  };

  function search(q){
    q = (q || '').trim().toLowerCase();
    if(!q) return [];
    return SITE_INDEX
      .map(it=>{
        const hay = (it.title + ' ' + (it.keywords||'')).toLowerCase();
        const inTitle = it.title.toLowerCase().includes(q) ? 2 : 0;
        const inKeys  = hay.includes(q) ? 1 : 0;
        return {...it, score: inTitle + inKeys};
      })
      .filter(x => x.score > 0)
      .sort((a,b) => b.score - a.score)
      .slice(0,8);
  }

  function render(list){
    BOX.innerHTML = '';
    if(list.length === 0){ BOX.style.display='none'; return; }
    list.forEach(r => BOX.appendChild(makeItem(r)));
    BOX.style.display = 'block';
  }

  INPUT.addEventListener('input', ()=> render(search(INPUT.value)));
  document.addEventListener('click', (e)=>{
    if(!BOX.contains(e.target) && e.target !== INPUT) BOX.style.display='none';
  });
  INPUT.addEventListener('keydown', (e)=>{
    if(e.key === 'Enter'){
      const first = BOX.querySelector('a');
      if(first){ window.location.href = first.href; }
    }
  });
})();
// --- End of Site-wide search functionality ---


// Initial Setup
document.addEventListener("DOMContentLoaded", () => {
    loadData(); // Load data from JSON

    // Attach filter event listeners
    document.querySelectorAll(".tabs button").forEach(btn => {
        btn.addEventListener("click", () => filterUnits(btn.dataset.filter));
    });
    
    // Attach search event listener
    document.getElementById('unitsFilter').addEventListener('input', searchUnits);

    // Initialize Fancybox
    Fancybox.bind("[data-fancybox]", {});
});
</script>

</body>
</html>
