<header class="topbar">
  <div class="container navbar">
    <!-- ุงูุดุนุงุฑ ูููู -->
    <a class="brandbox" href="index.html" aria-label="ุงูุฑุฆูุณูุฉ">
      <img src="https://f.top4top.io/p_3530kc1gs0.png" alt="Islam Esmail Real Estate" style="height:44px;width:auto">
    </a>

    <!-- ุณุทุญ ุงูููุชุจ: ูุบุฉ + ุงุชุตู ุจูุง + ุงูุฑูุงุจุท -->
    <nav class="navline" aria-label="ุฑูุงุจุท ุฑุฆูุณูุฉ">
      <button class="boxbtn" id="langToggle" type="button" aria-label="English">EN</button>

      <div class="dropdown" id="nav-contact">
        <button class="boxbtn" aria-haspopup="true" aria-expanded="false" onclick="togglePanel && togglePanel('nav-contact')">ุงุชุตู ุจูุง โพ</button>
        <div class="panel" role="menu" aria-label="ุฑูุงุจุท ุงูุชูุงุตู">
          <a href="tel:+201050072527">๐ ุงุชุตุงู ุงูุขู</a>
          <a href="https://wa.me/201050072527" target="_blank" rel="noopener">๐ฌ ูุงุชุณุงุจ</a>
          <a href="mailto:islammesmail@gmail.com">โ๏ธ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</a>
        </div>
      </div>

      <a class="linkx" href="sokhna.html">ุงูุนูู ุงูุณุฎูุฉ</a>
      <a class="linkx" href="north.html">ุงูุณุงุญู ุงูุดูุงูู</a>
      <a class="linkx" href="Cairo.html">ุงููุงูุฑุฉ ุงูุฌุฏูุฏุฉ</a>
      <a class="linkx" href="resale.html">ุฅุนุงุฏุฉ ุงูุจูุน</a>
      <a class="linkx" href="list.html">ุฃุนุฑุถ ูุญุฏุชู</a>
    </nav>

    <!-- ุงูููุจุงูู -->
    <div class="mobile-controls" aria-label="ุฃุฏูุงุช ุณุฑูุนุฉ">
      <div class="mbar">
        <button class="boxbtn" id="m-lang" type="button" aria-label="English">EN</button>

        <div class="dropdown" id="m-contact">
          <button class="boxbtn" aria-haspopup="true" aria-expanded="false" onclick="togglePanel && togglePanel('m-contact')">ุงุชุตู ุจูุง โพ</button>
          <div class="panel" role="menu" aria-label="ุฑูุงุจุท ุงูุชูุงุตู">
            <a href="tel:+201050072527">๐ ุงุชุตุงู ุงูุขู</a>
            <a href="https://wa.me/201050072527" target="_blank" rel="noopener">๐ฌ ูุงุชุณุงุจ</a>
            <a href="mailto:islammesmail@gmail.com">โ๏ธ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</a>
          </div>
        </div>

        <div class="dropdown" id="m-proj">
          <button class="boxbtn" aria-haspopup="true" aria-expanded="false" onclick="togglePanel && togglePanel('m-proj')">ุงูููุงุทู โพ</button>
          <div class="panel" role="menu" aria-label="ุฃูุณุงู ุงููุดุงุฑูุน">
            <a href="sokhna.html">ุงูุนูู ุงูุณุฎูุฉ</a>
            <a href="north.html">ุงูุณุงุญู ุงูุดูุงูู</a>
            <a href="Cairo.html">ุงููุงูุฑุฉ ุงูุฌุฏูุฏุฉ</a>
            <a href="resale.html">ุฅุนุงุฏุฉ ุงูุจูุน</a>
            <a href="list.html">ุฃุนุฑุถ ูุญุฏุชู</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</header>

<script>
/* === ููุจุฏูู ุงููุบุฉ ุงูุฐูู (AR -> EN) ===
   ุงููุงุนุฏุฉ: page.html  --> page-en.html
            index.html --> index-en.html
   ูู ุนูุฏู ุตูุญุงุช ุงุณุชุซูุงุก ุงุณููุง ูุฎุชููุ ุถูููุง ูู LANG_EXCEPTIONS ุชุญุช.
*/
(function(){
  // ุตูุญุงุช ุงุณุชุซูุงุก ูู ุงูุงุณู ุงูุฅูุฌููุฒู ูุฎุชูู (ุงุฎุชูุงุฑู)
  const LANG_EXCEPTIONS = {
    // "Cairo.html": "Cairo-en.html",
    // "some-arabic.html": "custom-english-en.html",
  };

  function toEnglish(arFile){
    if (LANG_EXCEPTIONS[arFile]) return LANG_EXCEPTIONS[arFile];
    const m = arFile.match(/^(.*?)(-en)?\.html$/i);
    if(!m) return "index-en.html";
    const base = m[1];
    return base + "-en.html";
  }

  function buildTargetUrlEN(){
    const path = location.pathname.split("/").pop() || "index.html";
    return toEnglish(path);
  }

  function goEn(){
    const dest = buildTargetUrlEN();
    // ุญุงูุธ ุนูู ููุณ ุงููุฌูุฏ ุงูุญุงูู
    const prefix = location.pathname.replace(/[^\/]+$/, "");
    location.href = prefix + dest;
  }

  document.getElementById("langToggle")?.addEventListener("click", goEn);
  document.getElementById("m-lang")?.addEventListener("click", goEn);
})();
</script>
