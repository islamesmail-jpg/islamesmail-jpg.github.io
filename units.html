<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>الوحدات المتاحة | Islam Real Estate</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css">
  <style>
    body { font-family: "Tajawal", sans-serif; background: #f8f9fa; }
    h1 { font-size: 1.8rem; margin-bottom: 20px; }
    .tabs { margin-bottom: 20px; }
    .card { border: none; border-radius: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); transition: transform .2s; }
    .card:hover { transform: translateY(-5px); }
    .card img { border-radius: 15px 15px 0 0; height: 200px; object-fit: cover; }
    .badge { font-size: 0.8rem; }
    .tab-pane { margin-top: 15px; }
  </style>
</head>
<body class="container py-4">

  <h1 class="text-center mb-4">الوحدات المتاحة</h1>

  <!-- التبويبات -->
  <ul class="nav nav-tabs justify-content-center tabs" id="unitTabs" role="tablist">
    <li class="nav-item" role="presentation">
      <button class="nav-link active" id="all-tab" data-bs-toggle="tab" data-bs-target="#all" type="button">الكل</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" id="developer-tab" data-bs-toggle="tab" data-bs-target="#developer" type="button">المطور</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" id="resale-tab" data-bs-toggle="tab" data-bs-target="#resale" type="button">إعادة البيع</button>
    </li>
  </ul>

  <!-- محتوى التبويبات -->
  <div class="tab-content" id="unitTabsContent">
    <div class="tab-pane fade show active" id="all" role="tabpanel"></div>
    <div class="tab-pane fade" id="developer" role="tabpanel"></div>
    <div class="tab-pane fade" id="resale" role="tabpanel"></div>
  </div>

  <script>
    async function loadUnits() {
      const containerAll = document.getElementById('all');
      const containerDev = document.getElementById('developer');
      const containerResale = document.getElementById('resale');

      // قراءة كل ملفات JSON داخل المجلد
      const files = [
        'content/units/unit-101-murano-developer.json',
        'content/units/unit-205-murano-resale.json',
        'content/units/unit-309-murano-sold.json'
      ];

      for (let file of files) {
        const res = await fetch(file);
        const unit = await res.json();

        const card = `
          <div class="col-md-4 mb-4">
            <div class="card">
              <img src="${unit.images[0]}" alt="${unit.title}">
              <div class="card-body">
                <h5>${unit.title}</h5>
                <p class="text-muted mb-1">${unit.project}</p>
                <p><span class="badge bg-${unit.status === 'مباع' ? 'secondary' : 'success'}">${unit.status}</span> 
                   <span class="badge bg-info">${unit.source}</span></p>
                <p class="mb-2">غرف: ${unit.bedrooms} | حمامات: ${unit.bathrooms}</p>
                <p class="small text-muted">${unit.description.slice(0, 80)}...</p>
              </div>
            </div>
          </div>
        `;

        // عرض في تبويب الكل
        containerAll.insertAdjacentHTML('beforeend', card);

        // عرض حسب المصدر
        if (unit.source === 'مطور') containerDev.insertAdjacentHTML('beforeend', card);
        if (unit.source === 'إعادة بيع') containerResale.insertAdjacentHTML('beforeend', card);
      }
    }

    loadUnits();
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
